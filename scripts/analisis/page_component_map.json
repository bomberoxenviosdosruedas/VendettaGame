{
  "src/app/page.tsx": {
    "route": "/",
    "code": "import { LandingPage } from '@/components/landing/landing-page';\n\nexport default function HomePage() {\n  return <LandingPage />;\n}\n",
    "components": [
      {
        "path": "src/components/landing/landing-page.tsx",
        "code": "import Image from \"next/image\";\nimport Link from \"next/link\";\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { AlertTriangle, Flag } from \"lucide-react\";\nimport { PlaceHolderImages } from \"@/lib/placeholder-images\";\nimport { GamePreview } from \"./game-preview\";\n\nexport function LandingPage() {\n  const vendettaHeader = PlaceHolderImages.find(p => p.id === \"vendetta-header\");\n  const gangster = PlaceHolderImages.find(p => p.id === \"gangster-silhouette\");\n\n  return (\n    <div className=\"bg-black text-white min-h-screen\">\n      <div className=\"container mx-auto px-4 py-2\">\n        <header className=\"relative text-center py-4 border-b-4 border-primary\">\n          {vendettaHeader && (\n            <Image\n              src={vendettaHeader.imageUrl}\n              alt={vendettaHeader.description}\n              fill\n              style={{ objectFit: 'cover' }}\n              className=\"opacity-20\"\n              data-ai-hint={vendettaHeader.imageHint}\n              priority\n            />\n          )}\n          <div className=\"relative z-10\">\n            <h1 className=\"text-6xl md:text-8xl vendetta-font text-gray-200\">VENDETTA</h1>\n            <p className=\"text-xl md:text-2xl vendetta-font text-gray-300\">THE VAULT GATE</p>\n          </div>\n        </header>\n\n        <nav className=\"bg-primary text-primary-foreground flex justify-between items-center px-4 py-2 text-sm\">\n          <Link href=\"/signup\" className=\"hover:underline\">\n            Reg\u00edstrate\n          </Link>\n          <div className=\"flex gap-4\">\n            <span>Online: 2</span>\n            <span>Utenti Totali: 100</span>\n          </div>\n        </nav>\n\n        <div className=\"bg-gray-800/50 flex justify-between items-center px-4 py-1 text-xs border-b border-border\">\n          <div className=\"flex gap-2\">\n            <button aria-label=\"Select language: Italian\" className=\"focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 rounded-sm\">\n              <Image src=\"https://flagcdn.com/it.svg\" width={20} height={15} alt=\"Italian Flag\" />\n            </button>\n            <button aria-label=\"Select language: English\" className=\"focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 rounded-sm\">\n              <Image src=\"https://flagcdn.com/gb.svg\" width={20} height={15} alt=\"British Flag\" />\n            </button>\n            <button aria-label=\"Select language: French\" className=\"focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 rounded-sm\">\n              <Image src=\"https://flagcdn.com/fr.svg\" width={20} height={15} alt=\"French Flag\" />\n            </button>\n            <button aria-label=\"Select language: German\" className=\"focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 rounded-sm\">\n              <Image src=\"https://flagcdn.com/de.svg\" width={20} height={15} alt=\"German Flag\" />\n            </button>\n            <button aria-label=\"Select language: Spanish\" className=\"focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 rounded-sm\">\n              <Image src=\"https://flagcdn.com/es.svg\" width={20} height={15} alt=\"Spanish Flag\" />\n            </button>\n          </div>\n          <div className=\"text-gray-400\">\n             <span>En l\u00ednea: 2</span> | <span>Usuarios Totales: 100</span>\n          </div>\n        </div>\n\n        <main className=\"grid grid-cols-1 md:grid-cols-1 gap-4 py-4\">\n          <section>\n            <Card className=\"bg-primary/20 border-primary\">\n              <CardHeader className=\"bg-primary py-2 px-4 rounded-t-sm\">\n                <CardTitle className=\"text-lg text-primary-foreground\">Login</CardTitle>\n              </CardHeader>\n              <CardContent className=\"p-4\">\n                <form className=\"flex items-center gap-2\">\n                  <Select defaultValue=\"server1\">\n                    <SelectTrigger className=\"w-[150px] bg-input text-foreground\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"server1\">Server 1</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  <Input placeholder=\"Username\" className=\"bg-input\" />\n                  <Input type=\"password\" placeholder=\"Password\" className=\"bg-input\"/>\n                  <Button type=\"submit\" variant=\"destructive\" className=\"bg-accent hover:bg-accent/90\">Enviar</Button>\n                </form>\n                <Link href=\"/forgot-password\" passHref>\n                    <p className=\"text-xs text-right mt-2 hover:underline cursor-pointer text-gray-400\">\u00bfOlvidaste tu password?</p>\n                </Link>\n              </CardContent>\n            </Card>\n          </section>\n\n          <section>\n             <Card className=\"bg-primary/20 border-primary\">\n                <CardHeader className=\"bg-primary py-2 px-4 rounded-t-sm\">\n                   <CardTitle className=\"text-lg text-primary-foreground\">Supporto Tecnico / SOS</CardTitle>\n                </CardHeader>\n                <CardContent className=\"p-4 bg-card/80\">\n                   <div className=\"bg-black/50 p-4 rounded-sm\">\n                      <h3 className=\"text-lg font-bold text-yellow-500 flex items-center gap-2\"><AlertTriangle size={20}/> SYSTEM ALERT</h3>\n                      <ul className=\"text-sm mt-2 space-y-1 list-disc list-inside\">\n                        <li><span className=\"mr-2\">\ud83c\uddec\ud83c\udde7</span> Login issues? Account locked?</li>\n                        <li><span className=\"mr-2\">\ud83c\uddee\ud83c\uddf9</span> Problemi di accesso? Account bloccato?</li>\n                        <li><span className=\"mr-2\">\ud83c\uddea\ud83c\uddf8</span> \u00bfProblemas de conexi\u00f3n?</li>\n                        <li><span className=\"mr-2\">\ud83c\uddeb\ud83c\uddf7</span> Probl\u00e8mes de connexion?</li>\n                        <li><span className=\"mr-2\">\ud83c\udde9\ud83c\uddea</span> Anmeldungsprobleme?</li>\n                      </ul>\n                      <Button variant=\"destructive\" className=\"mt-4 w-full bg-accent hover:bg-accent/90\">APRI SEGNALAZIONE SOS</Button>\n                   </div>\n                </CardContent>\n             </Card>\n          </section>\n\n           <section>\n            <Card className=\"bg-primary/20 border-primary\">\n              <CardHeader className=\"bg-primary py-2 px-4 rounded-t-sm\">\n                <CardTitle className=\"text-lg text-primary-foreground\">Reg\u00edstrate</CardTitle>\n              </CardHeader>\n              <CardContent className=\"p-4 text-center text-sm text-gray-300 space-y-4\">\n                <p>\u00bfQuieres ser el Capo de la Mafia m\u00e1s importante en la ciudad? \u00bfQu\u00e9 esperas?</p>\n                <p>Construye habitaciones para obtener m\u00e1s recursos junto con las m\u00e1s avanzadas tecnolog\u00edas, tropas de ataque e incluso podr\u00e1s obtener un ej\u00e9rcito inmejorable con las tropas de defensa mejor desarrolladas, y as\u00ed...</p>\n                <p className=\"font-bold text-lg\">\u00a1Dominar la ciudad!</p>\n                <p>Entrena a tus &quot;chicos&quot; para volverse m\u00e1s fuertes; vigila el mapa de la ciudad para comprobar aquellos aliados o enemigos que se encuentren cerca de tu zona; revisa la clasificaci\u00f3n para conocer quienes son actualmente los mafiosos m\u00e1s poderosos y... \u00a1muchas cosas m\u00e1s!</p>\n                 <Button variant=\"destructive\" size=\"lg\" className=\"w-full bg-accent hover:bg-accent/90\">\n                    REG\u00cdSTRATE GRATIS EN EL SERVIDOR 1\n                </Button>\n              </CardContent>\n            </Card>\n          </section>\n\n          <section>\n            <Card className=\"bg-primary/20 border-primary\">\n              <CardHeader className=\"bg-primary py-2 px-4 rounded-t-sm\">\n                <CardTitle className=\"text-lg text-primary-foreground\">Aviso Importante: Mantenimiento Programado</CardTitle>\n              </CardHeader>\n              <CardContent className=\"p-4 text-sm text-gray-300 space-y-2\">\n                 <p>Estimados Jugadores, para garantizar la estabilidad y la calidad del juego, hemos establecido un nuevo programa de mantenimiento.</p>\n                 <p>1. MANTENIMIENTO PROGRAMADO (SEMANAL): Cada S\u00e1bado ha sido designado como d\u00eda oficial para el mantenimiento rutinario. Durante este d\u00eda, es posible que el servidor est\u00e9 desconectado temporalmente.</p>\n                 <p>2. MANTENIMIENTO URGENTE (NOCTURNO): Cualquier intervenci\u00f3n cr\u00edtica (como la correcci\u00f3n de errores graves) se realizar\u00e1, cuando sea posible, en horario nocturno. Gracias por su paciencia y apoyo continuo.</p>\n                 <p className=\"text-right\">- La Administraci\u00f3n</p>\n              </CardContent>\n            </Card>\n          </section>\n\n          <section>\n            <Card className=\"bg-stone-200 border-stone-400 text-black p-8 flex flex-col items-center justify-center\">\n              {gangster && (\n                 <Image src={gangster.imageUrl} alt={gangster.description} width={100} height={150} data-ai-hint={gangster.imageHint} />\n              )}\n              <h2 className=\"text-6xl font-bold vendetta-font text-black/80\">REGISTRATI</h2>\n              <h2 className=\"text-6xl font-bold vendetta-font text-black/80\">ORA</h2>\n            </Card>\n          </section>\n\n          <GamePreview />\n\n        </main>\n      </div>\n    </div>\n  );\n}\n",
        "dependencies": [
          {
            "path": "src/components/landing/game-preview.tsx",
            "code": "'use client'\nimport Image from \"next/image\";\nimport {\n    Card,\n    CardContent,\n    CardHeader,\n    CardTitle,\n} from \"@/components/ui/card\";\nimport {\n    Dialog,\n    DialogContent,\n    DialogTrigger,\n} from \"@/components/ui/dialog\"\nimport { PlaceHolderImages } from \"@/lib/placeholder-images\";\n\n\nconst previewImages = [\n    PlaceHolderImages.find(p => p.id === \"game-preview-1\"),\n    PlaceHolderImages.find(p => p.id === \"game-preview-2\"),\n    PlaceHolderImages.find(p => p.id === \"game-preview-3\"),\n    PlaceHolderImages.find(p => p.id === \"game-preview-4\"),\n    PlaceHolderImages.find(p => p.id === \"game-preview-5\"),\n].filter(Boolean) as (typeof PlaceHolderImages[0])[];\n\n\nexport function GamePreview() {\n    return (\n        <section>\n            <Card className=\"bg-primary/20 border-primary\">\n                <CardHeader className=\"bg-primary py-2 px-4 rounded-t-sm\">\n                    <CardTitle className=\"text-lg text-primary-foreground\">Vista previa del juego</CardTitle>\n                </CardHeader>\n                <CardContent className=\"p-4 text-center\">\n                    <p className=\"text-sm text-gray-300 mb-4\">Haz clic en las im\u00e1genes para ampliarlas y echar un vistazo al juego.</p>\n                    <div className=\"flex justify-center gap-2\">\n                        {previewImages.map((img, index) => (\n                             <Dialog key={index}>\n                                <DialogTrigger>\n                                     <Image\n                                        key={index}\n                                        src={img.imageUrl}\n                                        alt={`${img.description} ${index + 1}`}\n                                        width={120}\n                                        height={90}\n                                        className=\"border-2 border-gray-500 hover:border-accent cursor-pointer transition-all\"\n                                        data-ai-hint={img.imageHint}\n                                    />\n                                </DialogTrigger>\n                                <DialogContent className=\"max-w-4xl bg-card border-primary\">\n                                     <Image\n                                        src={img.imageUrl}\n                                        alt={`${img.description} ${index + 1}`}\n                                        width={800}\n                                        height={600}\n                                        className=\"w-full h-auto\"\n                                        data-ai-hint={img.imageHint}\n                                    />\n                                </DialogContent>\n                            </Dialog>\n                        ))}\n                    </div>\n                </CardContent>\n            </Card>\n        </section>\n    )\n}\n"
          },
          {
            "path": "src/lib/placeholder-images.ts",
            "code": "import data from './placeholder-images.json';\n\nexport type ImagePlaceholder = {\n  id: string;\n  description: string;\n  imageUrl: string;\n  imageHint: string;\n};\n\nexport const PlaceHolderImages: ImagePlaceholder[] = data.placeholderImages;\n"
          }
        ]
      }
    ]
  },
  "src/app/dashboard/page.tsx": {
    "route": "/dashboard",
    "code": "'use client';\nimport { ServerTime } from '@/components/dashboard/server-time';\nimport { Troops } from '@/components/dashboard/troops';\nimport { ExpandingRooms } from '@/components/dashboard/expanding-rooms';\nimport { BuildingInfo } from '@/components/dashboard/building-info';\nimport { Training } from '@/components/dashboard/training';\nimport { TroopsDefense } from '@/components/dashboard/troops-defense';\nimport { TroopsInTraining } from '@/components/dashboard/troops-in-training';\nimport { Needles } from '@/components/dashboard/needles';\n\nexport default function DashboardPage() {\n  return (\n    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\n      <div className=\"lg:col-span-1 space-y-4\">\n        <ServerTime />\n        <Troops />\n        <ExpandingRooms />\n        <Training />\n      </div>\n      <div className=\"lg:col-span-2 space-y-4\">\n        <BuildingInfo />\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4\">\n          <TroopsDefense />\n          <TroopsInTraining />\n        </div>\n        <Needles />\n      </div>\n    </div>\n  );\n}\n",
    "components": [
      {
        "path": "src/components/dashboard/building-info.tsx",
        "code": "import Image from \"next/image\";\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { PlaceHolderImages } from \"@/lib/placeholder-images\";\nimport Link from \"next/link\";\n\nexport function BuildingInfo() {\n  const buildingImage = PlaceHolderImages.find(p => p.id === \"dark-alley\") || PlaceHolderImages.find(p => p.id === \"vendetta-header\");\n\n  return (\n    <Card className=\"border-primary bg-stone-200 text-black\">\n      <CardHeader className=\"bg-primary/80 py-2 px-4\">\n        <CardTitle className=\"text-lg text-primary-foreground\">\n          all2 - Edificio 34:13:129\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"p-4 flex flex-col items-center gap-2\">\n        {buildingImage && (\n             <Image\n                src={buildingImage.imageUrl}\n                alt={buildingImage.description}\n                width={800}\n                height={400}\n                className=\"w-full h-auto rounded\"\n                data-ai-hint={buildingImage.imageHint}\n            />\n        )}\n        <Link href=\"#\" className=\"text-sm hover:underline text-blue-800\">\n            Editar imagen\n        </Link>\n      </CardContent>\n    </Card>\n  );\n}\n",
        "dependencies": [
          {
            "path": "src/lib/placeholder-images.ts",
            "code": "import data from './placeholder-images.json';\n\nexport type ImagePlaceholder = {\n  id: string;\n  description: string;\n  imageUrl: string;\n  imageHint: string;\n};\n\nexport const PlaceHolderImages: ImagePlaceholder[] = data.placeholderImages;\n"
          }
        ]
      },
      {
        "path": "src/components/dashboard/expanding-rooms.tsx",
        "code": "import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\n\nexport function ExpandingRooms() {\n  return (\n    <Card className=\"border-primary bg-stone-200 text-black\">\n      <CardHeader className=\"bg-primary/80 py-2 px-4 flex-row items-center justify-between\">\n        <CardTitle className=\"text-lg text-primary-foreground\">\n          Habitaciones en expansi\u00f3n\n        </CardTitle>\n        <span className=\"text-sm text-primary-foreground font-mono\">(1/1)</span>\n      </CardHeader>\n      <CardContent className=\"p-4 text-sm flex justify-between items-center\">\n        <span className=\"font-mono\">00:19:29</span>\n        <span className=\"truncate px-2\">Oficina del Jefe (2)</span>\n        <span className=\"font-mono\">34:13:129</span>\n      </CardContent>\n    </Card>\n  );\n}\n",
        "dependencies": []
      },
      {
        "path": "src/components/dashboard/needles.tsx",
        "code": "import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport Link from 'next/link';\n\nconst stats = [\n    { label: \"Cantidad de edificios\", value: \"1\" },\n    { label: \"Puntos de construcci\u00f3n\", value: \"7\" },\n    { label: \"Puntos de entrenamiento\", value: \"0\" },\n    { label: \"Puntos de tropa\", value: \"0\" },\n]\n\nexport function Needles() {\n  return (\n    <Card className=\"border-primary bg-stone-200 text-black\">\n      <CardHeader className=\"bg-primary/80 py-2 px-4\">\n        <CardTitle className=\"text-lg text-primary-foreground\">Agujas</CardTitle>\n      </CardHeader>\n      <CardContent className=\"p-4 text-sm\">\n        {stats.map(stat => (\n            <div key={stat.label} className=\"flex justify-between\">\n                <span>{stat.label}</span>\n                <span>{stat.value}</span>\n            </div>\n        ))}\n        <div className=\"flex justify-between border-t border-black/20 mt-2 pt-2\">\n            <span>Poder de ataque</span>\n            <span>100% (<Link href=\"/dashboard/poderataque\" className=\"text-blue-800 hover:underline\">Detalles</Link>)</span>\n        </div>\n        <div className=\"text-center mt-2\">\n            <Link href=\"/dashboard/overview\" className=\"text-blue-800 hover:underline\">Visi\u00f3n global</Link>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n",
        "dependencies": []
      },
      {
        "path": "src/components/dashboard/server-time.tsx",
        "code": "'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\n\nexport function ServerTime() {\n  const [serverTime, setServerTime] = useState('');\n\n  useEffect(() => {\n    const timer = setInterval(() => {\n      const now = new Date();\n      const date = `${String(now.getDate()).padStart(2, '0')}.${String(\n        now.getMonth() + 1\n      ).padStart(2, '0')}.${now.getFullYear()}`;\n      const time = `${String(now.getHours()).padStart(2, '0')}:${String(\n        now.getMinutes()\n      ).padStart(2, '0')}:${String(now.getSeconds()).padStart(2, '0')}`;\n      setServerTime(`${date} - ${time}`);\n    }, 1000);\n    return () => clearInterval(timer);\n  }, []);\n\n  return (\n    <Card className=\"border-primary bg-stone-200 text-black\">\n      <CardHeader className=\"bg-primary/80 py-2 px-4 flex-row items-center justify-between\">\n        <CardTitle className=\"text-lg text-primary-foreground\">\n          Hora del servidor\n        </CardTitle>\n        <Button variant=\"ghost\" size=\"icon\" className=\"h-6 w-6 text-primary-foreground\">\n          <span className=\"font-bold\">[-]</span>\n        </Button>\n      </CardHeader>\n      <CardContent className=\"p-4 text-center\">\n        <p className=\"text-xl font-bold\">{serverTime}</p>\n      </CardContent>\n    </Card>\n  );\n}\n",
        "dependencies": []
      },
      {
        "path": "src/components/dashboard/training.tsx",
        "code": "import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\n\nexport function Training() {\n  return (\n    <Card className=\"border-primary bg-stone-200 text-black\">\n      <CardHeader className=\"bg-primary/80 py-2 px-4 flex-row items-center justify-between\">\n        <CardTitle className=\"text-lg text-primary-foreground\">Capacitaci\u00f3n</CardTitle>\n      </CardHeader>\n      <CardContent className=\"p-4 text-center\">\n        <p className=\"text-sm\">-</p>\n      </CardContent>\n    </Card>\n  );\n}\n",
        "dependencies": []
      },
      {
        "path": "src/components/dashboard/troops-defense.tsx",
        "code": "import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\n\nexport function TroopsDefense() {\n  return (\n    <Card className=\"border-primary bg-stone-200 text-black\">\n      <CardHeader className=\"bg-primary/80 py-2 px-4 flex-row items-center justify-between\">\n        <CardTitle className=\"text-lg text-primary-foreground\">Tropas / Defensa</CardTitle>\n        <Button variant=\"ghost\" size=\"icon\" className=\"h-6 w-6 text-primary-foreground\">\n          <span className=\"font-bold\">[-]</span>\n        </Button>\n      </CardHeader>\n      <CardContent className=\"p-4 text-center\">\n        <p className=\"text-sm\">-</p>\n      </CardContent>\n    </Card>\n  );\n}\n",
        "dependencies": []
      },
      {
        "path": "src/components/dashboard/troops-in-training.tsx",
        "code": "import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\n\nexport function TroopsInTraining() {\n  return (\n    <Card className=\"border-primary bg-stone-200 text-black\">\n      <CardHeader className=\"bg-primary/80 py-2 px-4 flex-row items-center justify-between\">\n        <CardTitle className=\"text-lg text-primary-foreground\">Tropas en entrenamiento</CardTitle>\n        <Button variant=\"ghost\" size=\"icon\" className=\"h-6 w-6 text-primary-foreground\">\n          <span className=\"font-bold\">[-]</span>\n        </Button>\n      </CardHeader>\n      <CardContent className=\"p-4 text-center\">\n        <p className=\"text-sm\">-</p>\n      </CardContent>\n    </Card>\n  );\n}\n",
        "dependencies": []
      },
      {
        "path": "src/components/dashboard/troops.tsx",
        "code": "import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport Link from 'next/link';\n\nexport function Troops() {\n  return (\n    <Card className=\"border-primary bg-stone-200 text-black\">\n      <CardHeader className=\"bg-primary/80 py-2 px-4\">\n        <CardTitle className=\"text-lg text-primary-foreground\">Tropas</CardTitle>\n      </CardHeader>\n      <CardContent className=\"p-4 space-y-2 text-center\">\n        <Link href=\"#\" className=\"block hover:underline text-sm text-blue-800\">\n          Visi\u00f3n global de las tropas\n        </Link>\n        <Link href=\"#\" className=\"block hover:underline text-sm text-blue-800\">\n          Visi\u00f3n global de las Misiones\n        </Link>\n        <p className=\"text-sm\">Sin unidad</p>\n      </CardContent>\n    </Card>\n  );\n}\n",
        "dependencies": []
      }
    ]
  },
  "src/app/dashboard/buildings/page.tsx": {
    "route": "/dashboard/buildings",
    "code": "import { BuildingsContent } from \"@/components/dashboard/buildings/buildings-content\";\n\nexport default function BuildingsPage() {\n    return <BuildingsContent />;\n}\n",
    "components": [
      {
        "path": "src/components/dashboard/buildings/buildings-content.tsx",
        "code": "'use client';\n\nimport { useGameState } from '@/components/providers/game-state-provider';\nimport { cancelConstructionAction } from '@/actions/game.actions';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { useOptimistic, useTransition } from 'react';\nimport { useToast } from '@/hooks/use-toast';\nimport { ColaDetalle } from '@/types/game';\n\nexport function BuildingsContent() {\n  const { gameState } = useGameState();\n  const { toast } = useToast();\n  const [isPending, startTransition] = useTransition();\n\n  // Optimistic State for Construction Queue\n  const [optimisticQueue, removeOptimisticItem] = useOptimistic(\n    gameState?.colas.construccion || [],\n    (state, queueId: string) => state.filter((item) => item.id !== queueId)\n  );\n\n  if (!gameState) {\n    return <div className=\"p-4 text-center\">Cargando gesti\u00f3n de edificios...</div>;\n  }\n\n  const { propiedad } = gameState;\n  const queues = optimisticQueue;\n\n  const handleCancel = (queueId: string) => {\n    startTransition(async () => {\n      // Optimistic update\n      removeOptimisticItem(queueId);\n\n      // Server Action\n      const result = await cancelConstructionAction(queueId);\n\n      if (!result.success) {\n        toast({\n            variant: \"destructive\",\n            title: \"Error\",\n            description: result.error,\n        });\n        // Note: useOptimistic automatically reverts if we don't update state via other means,\n        // but since we are relying on revalidatePath in Server Action or Realtime,\n        // a failure implies the data won't change on server, so next render might show it again (correct).\n      } else {\n        toast({\n            title: \"Construcci\u00f3n cancelada\",\n            description: result.message,\n        });\n      }\n    });\n  };\n\n  const formatTime = (isoString: string) => {\n    const date = new Date(isoString);\n    const now = new Date();\n    const diff = Math.max(0, Math.floor((date.getTime() - now.getTime()) / 1000));\n\n    const hours = Math.floor(diff / 3600);\n    const minutes = Math.floor((diff % 3600) / 60);\n    const seconds = diff % 60;\n\n    return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n  };\n\n  // Mock property list row (since we only have 1 property currently in dashboard context)\n  // In a multi-property view, we would map over properties.\n  // Here we show the current property as the \"active\" one being managed.\n\n  return (\n    <Card className=\"border-primary bg-stone-200 text-black\">\n        <CardHeader className=\"bg-primary/80 py-3 px-4\">\n            <CardTitle className=\"text-xl text-primary-foreground\">\n                Gesti\u00f3n de Edificios y Colas\n            </CardTitle>\n            <CardDescription className=\"text-primary-foreground/80 pt-1\">\n                Monitorea el estado de tus edificios. Actualizaciones de construcci\u00f3n en tiempo real.\n            </CardDescription>\n        </CardHeader>\n        <CardContent className=\"p-0\">\n            {/* Vista de tabla para pantallas grandes */}\n            <div className=\"hidden md:block overflow-x-auto\">\n                <Table>\n                    <TableHeader>\n                        <TableRow className=\"bg-primary/70 hover:bg-primary/70\">\n                            <TableHead className=\"text-primary-foreground\">Coordenadas</TableHead>\n                            <TableHead className=\"text-primary-foreground\">Nombre</TableHead>\n                            <TableHead className=\"text-primary-foreground\">Cola de Construcci\u00f3n</TableHead>\n                            <TableHead className=\"text-primary-foreground\">Acci\u00f3n</TableHead>\n                        </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                        <TableRow className=\"bg-stone-200 hover:bg-stone-300/60\">\n                            <TableCell className=\"font-medium text-red-600\">\n                                [{propiedad.coordenada_ciudad}:{propiedad.coordenada_barrio}:{propiedad.coordenada_edificio}]\n                            </TableCell>\n                            <TableCell>\n                                <div className=\"flex flex-col gap-2\">\n                                    <span>{propiedad.nombre}</span>\n                                    <div className=\"flex gap-1\">\n                                        <Input defaultValue=\"Renombrar\" className=\"h-8 text-xs w-28\" disabled />\n                                        <Button variant=\"outline\" size=\"sm\" className=\"h-8 text-xs\" disabled>Renombrar</Button>\n                                    </div>\n                                </div>\n                            </TableCell>\n                            <TableCell>\n                                {queues.length === 0 ? (\n                                    <span className=\"text-stone-500 italic\">Sin construcciones en curso</span>\n                                ) : (\n                                    <div className=\"flex flex-col gap-2\">\n                                        {queues.map((item) => (\n                                            <div key={item.id} className=\"flex items-center gap-2 text-sm\">\n                                                <span className=\"text-red-600 font-semibold\">\n                                                    {item.nombre} (Niv. {item.nivel_destino})\n                                                </span>\n                                                <span className=\"font-mono text-xs\">\n                                                    {formatTime(item.fecha_fin)}\n                                                </span>\n                                                <button\n                                                    onClick={() => handleCancel(item.id)}\n                                                    disabled={isPending}\n                                                    className=\"text-red-600 hover:underline text-xs font-bold\"\n                                                >\n                                                    [X] Cancelar\n                                                </button>\n                                            </div>\n                                        ))}\n                                    </div>\n                                )}\n                            </TableCell>\n                            <TableCell>\n                                <Button variant=\"destructive\" size=\"sm\" className=\"bg-accent hover:bg-accent/90\">Gestionar</Button>\n                            </TableCell>\n                        </TableRow>\n                    </TableBody>\n                </Table>\n            </div>\n\n            {/* Vista de tarjetas para pantallas peque\u00f1as */}\n            <div className=\"md:hidden p-4 space-y-4\">\n                <div className=\"bg-stone-300/60 p-4 rounded-lg border border-primary/30 space-y-3\">\n                     <div className=\"flex justify-between items-start\">\n                        <div>\n                            <p className=\"text-sm text-muted-foreground\">Coordenadas</p>\n                            <p className=\"font-medium text-red-600\">\n                                [{propiedad.coordenada_ciudad}:{propiedad.coordenada_barrio}:{propiedad.coordenada_edificio}]\n                            </p>\n                        </div>\n                        <Button variant=\"destructive\" size=\"sm\" className=\"bg-accent hover:bg-accent/90\">Gestionar</Button>\n                    </div>\n                    <div>\n                        <p className=\"text-sm text-muted-foreground\">Nombre</p>\n                        <div className=\"flex flex-col gap-2 mt-1\">\n                            <span>{propiedad.nombre}</span>\n                        </div>\n                    </div>\n                    <div>\n                        <p className=\"text-sm text-muted-foreground\">Cola de Construcci\u00f3n</p>\n                        <div className=\"flex flex-col mt-1 gap-2\">\n                            {queues.length === 0 ? (\n                                <span className=\"text-stone-500 italic text-sm\">Sin construcciones en curso</span>\n                            ) : (\n                                queues.map((item) => (\n                                    <div key={item.id} className=\"flex flex-col\">\n                                        <span className=\"text-red-600 font-semibold text-sm\">\n                                            {item.nombre} (Niv. {item.nivel_destino})\n                                        </span>\n                                        <div className=\"flex justify-between items-center\">\n                                            <span className=\"text-xs\">{formatTime(item.fecha_fin)}</span>\n                                            <button\n                                                onClick={() => handleCancel(item.id)}\n                                                disabled={isPending}\n                                                className=\"text-red-600 hover:underline text-xs\"\n                                            >\n                                                [X] Cancelar\n                                            </button>\n                                        </div>\n                                    </div>\n                                ))\n                            )}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </CardContent>\n    </Card>\n  );\n}\n",
        "dependencies": [
          {
            "path": "src/actions/game.actions.ts",
            "code": "'use server'\n\nimport { z } from 'zod'\nimport {\n  createInitialProperty,\n  startConstruction,\n  syncResources,\n  startResearch,\n  recruitTroops,\n  launchMission,\n  cancelConstruction,\n  getDashboardData\n} from '@/lib/services/game.service'\nimport { createClient } from '@/lib/supabase/server'\nimport { revalidatePath } from 'next/cache'\nimport { redirect } from 'next/navigation'\n\nconst onboardingSchema = z.object({\n  nombre: z.string().min(3),\n  ciudad: z.coerce.number().min(1).max(100),\n  barrio: z.coerce.number().min(1).max(25),\n  edificio: z.coerce.number().min(1).max(25),\n})\n\nconst missionSchema = z.object({\n  propiedad_origen_id: z.string().uuid(),\n  tipo_mision: z.enum(['atacar', 'transportar', 'espiar', 'colonizar', 'recolectar']),\n  tropas: z.record(z.string(), z.number().int().min(1)),\n  recursos: z.record(z.string(), z.number().int().min(0)).optional(),\n  destino_ciudad: z.coerce.number().min(1),\n  destino_barrio: z.coerce.number().min(1),\n  destino_edificio: z.coerce.number().min(1),\n  velocidad_flota: z.coerce.number().min(1).max(100).optional(),\n})\n\nexport async function completeOnboardingAction(prevState: any, formData: FormData) {\n  const data = Object.fromEntries(formData.entries())\n\n  const parsed = onboardingSchema.safeParse(data)\n\n  if (!parsed.success) {\n    return { success: false, error: 'Datos inv\u00e1lidos. Verifica las coordenadas y el nombre.' }\n  }\n\n  const result = await createInitialProperty({\n    nombre: parsed.data.nombre,\n    ciudad: parsed.data.ciudad,\n    barrio: parsed.data.barrio,\n    edificio: parsed.data.edificio,\n  })\n\n  if (result.error) {\n    return { success: false, error: result.error }\n  }\n\n  revalidatePath('/dashboard')\n  redirect('/dashboard')\n}\n\nexport async function upgradeBuildingAction(buildingId: string) {\n  const schema = z.string().min(1)\n  const parsed = schema.safeParse(buildingId)\n\n  if (!parsed.success) {\n    return { success: false, error: 'ID de edificio inv\u00e1lido' }\n  }\n\n  const supabase = await createClient()\n  const { data: { user }, error: authError } = await supabase.auth.getUser()\n\n  if (authError || !user) {\n    return { success: false, error: 'No autenticado' }\n  }\n\n  const { data: propiedad, error: propError } = await supabase\n    .from('propiedad')\n    .select('id')\n    .eq('usuario_id', user.id)\n    .single()\n\n  if (propError || !propiedad) {\n    return { success: false, error: 'Propiedad no encontrada' }\n  }\n\n  const result = await startConstruction(propiedad.id, parsed.data)\n\n  if (result.success) {\n    revalidatePath('/dashboard/buildings')\n    revalidatePath('/dashboard/overview')\n    return { success: true, message: 'Construcci\u00f3n iniciada' }\n  } else {\n    return { success: false, error: result.error || 'No se pudo iniciar la construcci\u00f3n' }\n  }\n}\n\nexport async function cancelConstructionAction(queueId: string) {\n  const schema = z.string().uuid()\n  const parsed = schema.safeParse(queueId)\n\n  if (!parsed.success) {\n    return { success: false, error: 'ID de cola inv\u00e1lido' }\n  }\n\n  // Assuming auth check in RPC\n  const result = await cancelConstruction(parsed.data)\n\n  if (result.success) {\n    revalidatePath('/dashboard/buildings')\n    revalidatePath('/dashboard/overview')\n    return { success: true, message: 'Construcci\u00f3n cancelada' }\n  } else {\n    return { success: false, error: result.error || 'No se pudo cancelar la construcci\u00f3n' }\n  }\n}\n\nexport async function getDashboardDataAction() {\n  const supabase = await createClient()\n  const { data: { user }, error: authError } = await supabase.auth.getUser()\n\n  if (authError || !user) {\n    return { success: false, error: 'No autenticado' }\n  }\n\n  const { data: propiedad, error: propError } = await supabase\n    .from('propiedad')\n    .select('id')\n    .eq('usuario_id', user.id)\n    .single()\n\n  if (propError || !propiedad) {\n    return { success: false, error: 'Propiedad no encontrada' }\n  }\n\n  const dashboardData = await getDashboardData(propiedad.id)\n  \n  if (!dashboardData) {\n    return { success: false, error: 'Error al obtener datos' }\n  }\n\n  return { success: true, data: dashboardData }\n}\n\nexport async function refreshGameStateAction() {\n  const result = await getDashboardDataAction()\n  if (!result.success || !result.data) {\n    return { success: false, error: result.error }\n  }\n  return { success: true, data: result.data.propiedad } // Return prop only for legacy support if needed\n}\n\nexport async function startResearchAction(researchId: string) {\n  const schema = z.string().min(1)\n  const parsed = schema.safeParse(researchId)\n\n  if (!parsed.success) {\n    return { success: false, error: 'ID de investigaci\u00f3n inv\u00e1lido' }\n  }\n\n  const supabase = await createClient()\n  const { data: { user }, error: authError } = await supabase.auth.getUser()\n\n  if (authError || !user) {\n    return { success: false, error: 'No autenticado' }\n  }\n\n  // Research is tied to property for queue, so we need a property context.\n  // Assuming active property or main property. For now, fetch main property.\n  const { data: propiedad, error: propError } = await supabase\n    .from('propiedad')\n    .select('id')\n    .eq('usuario_id', user.id)\n    .single()\n\n  if (propError || !propiedad) {\n    return { success: false, error: 'Propiedad no encontrada' }\n  }\n\n  const result = await startResearch(propiedad.id, parsed.data)\n\n  if (result.success) {\n    revalidatePath('/game/research')\n    return { success: true, message: 'Investigaci\u00f3n iniciada' }\n  } else {\n    return { success: false, error: result.error || 'No se pudo iniciar la investigaci\u00f3n' }\n  }\n}\n\nexport async function recruitTroopsAction(troopId: string, amount: number) {\n  if (amount <= 0) return { success: false, error: 'Cantidad inv\u00e1lida' }\n\n  const supabase = await createClient()\n  const { data: { user }, error: authError } = await supabase.auth.getUser()\n\n  if (authError || !user) {\n    return { success: false, error: 'No autenticado' }\n  }\n\n  const { data: propiedad, error: propError } = await supabase\n    .from('propiedad')\n    .select('id')\n    .eq('usuario_id', user.id)\n    .single()\n\n  if (propError || !propiedad) {\n    return { success: false, error: 'Propiedad no encontrada' }\n  }\n\n  const result = await recruitTroops(propiedad.id, troopId, amount)\n\n  if (result.success) {\n    revalidatePath('/game/recruitment')\n    return { success: true, message: 'Reclutamiento iniciado' }\n  } else {\n    return { success: false, error: result.error || 'No se pudo iniciar el reclutamiento' }\n  }\n}\n\nexport async function launchMissionAction(prevState: any, formData: FormData) {\n  const data = Object.fromEntries(formData.entries())\n\n  // Parse nested JSON strings if coming from form hidden inputs, or handle appropriately.\n  // Assuming the form sends 'tropas' as a JSON string for now, or constructing it manually.\n  // For simplicity, let's assume valid form data structure or client-side preparation.\n  // If complex, it might need more parsing logic.\n\n  // However, Server Actions usually receive FormData. If the client sends complex structures,\n  // they often serialize to JSON strings.\n\n  const rawTropas = data.tropas ? JSON.parse(data.tropas as string) : {}\n  const rawRecursos = data.recursos ? JSON.parse(data.recursos as string) : {}\n\n  const payload = {\n    propiedad_origen_id: data.propiedad_origen_id,\n    tipo_mision: data.tipo_mision,\n    tropas: rawTropas,\n    recursos: rawRecursos,\n    destino_ciudad: data.destino_ciudad,\n    destino_barrio: data.destino_barrio,\n    destino_edificio: data.destino_edificio,\n    velocidad_flota: data.velocidad_flota\n  }\n\n  const parsed = missionSchema.safeParse(payload)\n\n  if (!parsed.success) {\n    return { success: false, error: 'Datos de misi\u00f3n inv\u00e1lidos', details: parsed.error.flatten() }\n  }\n\n  const result = await launchMission(parsed.data)\n\n  if (result.success) {\n    revalidatePath('/game/fleet')\n    return { success: true, message: 'Misi\u00f3n lanzada exitosamente' }\n  } else {\n    return { success: false, error: result.error || 'No se pudo lanzar la misi\u00f3n' }\n  }\n}\n"
          },
          {
            "path": "src/components/providers/game-state-provider.tsx",
            "code": "'use client';\n\nimport React, { createContext, useContext, ReactNode } from 'react';\nimport { DashboardData } from '@/types/game';\nimport { useGameRealtime } from '@/hooks/use-game-realtime';\n\ninterface GameStateContextType {\n  gameState: DashboardData | null;\n}\n\nconst GameStateContext = createContext<GameStateContextType | undefined>(undefined);\n\ninterface GameStateProviderProps {\n  initialData: DashboardData | null;\n  children: ReactNode;\n}\n\nexport function GameStateProvider({ initialData, children }: GameStateProviderProps) {\n  const gameState = useGameRealtime(initialData);\n\n  return (\n    <GameStateContext.Provider value={{ gameState }}>\n      {children}\n    </GameStateContext.Provider>\n  );\n}\n\nexport function useGameState() {\n  const context = useContext(GameStateContext);\n  if (context === undefined) {\n    throw new Error('useGameState must be used within a GameStateProvider');\n  }\n  return context;\n}\n"
          },
          {
            "path": "src/hooks/use-toast.ts",
            "code": "\"use client\"\n\n// Inspired by react-hot-toast library\nimport * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n"
          },
          {
            "path": "src/types/game.ts",
            "code": "import { z } from 'zod';\nimport { Propiedad, ColaConstruccion as ColaConstruccionDB } from './database';\n\nexport interface RecursoDetalle {\n  val: number;\n  max: number;\n  prod: number;\n}\n\nexport interface EdificioDetalle {\n  id: string;\n  nivel: number;\n  nombre: string;\n}\n\nexport interface ColaDetalle {\n  id: string;\n  habitacion_id?: string;\n  entrenamiento_id?: string;\n  tropa_id?: string;\n  nivel_destino?: number;\n  cantidad?: number;\n  fecha_fin: string;\n  nombre: string;\n}\n\nexport interface Colas {\n  construccion: ColaDetalle[];\n  investigacion: ColaDetalle[];\n  reclutamiento: ColaDetalle[];\n}\n\nexport interface DashboardData {\n  propiedad: Propiedad;\n  recursos: {\n    armas: RecursoDetalle;\n    municion: RecursoDetalle;\n    alcohol: RecursoDetalle;\n    dolares: RecursoDetalle;\n  };\n  edificios: EdificioDetalle[];\n  colas: Colas;\n  puntos: number;\n}\n\nexport interface Recursos {\n  armas: number;\n  municion: number;\n  alcohol: number;\n  dolares: number;\n}\n\nexport interface RespuestaConstruccion {\n  success: boolean;\n  fecha_inicio?: string;\n  fecha_fin?: string;\n  error?: string;\n}\n\nexport type ColaConstruccion = Pick<ColaConstruccionDB, 'id' | 'propiedad_id' | 'habitacion_id' | 'nivel_destino' | 'fecha_fin'>;\n\nexport const IniciarConstruccionSchema = z.object({\n  propiedad_id: z.string().uuid(),\n  habitacion_id: z.string().min(1),\n});\n"
          }
        ]
      }
    ]
  },
  "src/app/dashboard/training/page.tsx": {
    "route": "/dashboard/training",
    "code": "\nimport { trainingData } from \"@/lib/data/training-data\";\nimport { TrainingCard } from \"@/components/dashboard/training/training-card\";\nimport {\n    Card,\n    CardContent,\n    CardHeader,\n    CardTitle,\n  } from \"@/components/ui/card\";\n\nexport default function TrainingPage() {\n  return (\n    <div className=\"space-y-4\">\n        <Card className=\"border-primary bg-stone-200 text-black\">\n            <CardHeader className=\"bg-primary/80 py-2 px-4\">\n                <CardTitle className=\"text-lg text-primary-foreground\">\n                    Allenamento\n                </CardTitle>\n            </CardHeader>\n            <CardContent className=\"p-4 space-y-4\">\n                {trainingData.map((training) => (\n                    <TrainingCard key={training.id} training={training} />\n                ))}\n            </CardContent>\n        </Card>\n    </div>\n  );\n}\n",
    "components": [
      {
        "path": "src/components/dashboard/training/training-card.tsx",
        "code": "\n'use client';\n\nimport Image from \"next/image\";\nimport { Button } from \"@/components/ui/button\";\nimport { PlaceHolderImages } from \"@/lib/placeholder-images\";\nimport { Coins, Shell, Droplets } from \"lucide-react\";\nimport { Training, trainingData } from \"@/lib/data/training-data\";\n\ntype TrainingCardProps = {\n  training: Training;\n};\n\nconst ResourceIcon = ({ type }: { type: string }) => {\n    switch (type) {\n        case 'Armas': return <Shell className=\"w-4 h-4 inline-block ml-1\" />;\n        case 'Municion': return <Coins className=\"w-4 h-4 inline-block ml-1\" />;\n        case 'Dolares': return <p className=\"text-lg font-bold text-green-600 inline-block ml-1\">$</p>;\n        default: return null;\n    }\n}\n\nexport function TrainingCard({ training }: TrainingCardProps) {\n  const image = PlaceHolderImages.find((p) => p.id === training.image);\n\n  return (\n    <div className=\"bg-stone-300/60 text-black p-4 rounded-md border border-primary/50 flex flex-col md:flex-row gap-4 items-start w-full\">\n      <div className=\"flex-shrink-0 w-24\">\n        {image && (\n            <Image\n                src={image.imageUrl}\n                alt={image.description}\n                width={100}\n                height={100}\n                className=\"rounded w-full h-auto object-cover\"\n                data-ai-hint={image.imageHint}\n            />\n        )}\n      </div>\n      <div className=\"flex-1\">\n        <h3 className=\"font-bold text-lg text-primary\">{training.name}</h3>\n        <p className=\"text-sm my-2\">{training.description}</p>\n        <div className=\"flex items-center flex-wrap gap-x-4 gap-y-1 text-sm\">\n          {Object.entries(training.costs).map(([resource, value]) => (\n            <div key={resource} className=\"flex items-center\">\n              <span>{resource.charAt(0)}: {value.toLocaleString()}</span>\n              <ResourceIcon type={resource} />\n            </div>\n          ))}\n           <span>Duraci\u00f3n: {training.duration}</span>\n        </div>\n      </div>\n      <div className=\"flex flex-col items-center justify-center h-full ml-auto text-center\">\n        <Button variant=\"link\" className=\"text-green-600 h-auto p-0 flex flex-col items-center\">\n            <span className=\"text-lg\">Inizia</span>\n            <span>espansione</span>\n        </Button>\n      </div>\n    </div>\n  );\n}\n",
        "dependencies": [
          {
            "path": "src/lib/data/training-data.ts",
            "code": "\nexport type Training = {\n    id: string;\n    name: string;\n    description: string;\n    image: string;\n    costs: {\n        Armas?: number;\n        Municion?: number;\n        Dolares?: number;\n    };\n    duration: string;\n};\n\nexport const trainingData: Training[] = [\n    {\n        id: \"planificacion-rutas\",\n        name: \"Planificacion de rutas\",\n        description: \"Para ser m\u00e1s efectivos en llegar tan r\u00e1pido como sea posible al objetivo, tus chicos deber\u00edan hacer este entrenamiento. Aqu\u00ed aprender\u00e1n a planear rutas, viajar silenciosamente, y aproximarse al objetivo sin ser detectados, para llevar a cabo su trabajo tan efectivamente como sea posible.\",\n        image: \"training-routes\",\n        costs: { Armas: 500, Municion: 1200 },\n        duration: \"00:11:07\",\n    },\n    {\n        id: \"extorsion\",\n        name: \"Extorsion\",\n        description: \"Con ayuda de este entrenamiento tus chicos mejorar\u00e1n notablemente cuando se trata de sacar dinero a base de extorsionar a tus enemigos. Esto se notar\u00e1 en la fuerza de combate que aumentar\u00e1 seg\u00fan el nivel alcanzado.\",\n        image: \"training-extortion\",\n        costs: { Armas: 1000, Municion: 2000 },\n        duration: \"00:16:40\",\n    },\n    {\n        id: \"espionaje\",\n        name: \"Espionaje\",\n        description: \"En este entrenamiento aprender\u00e1s las virtudes del espionaje por el cual tus esp\u00edas podr\u00e1n sacar informaci\u00f3n amplia y valiosa de tus enemigos.\",\n        image: \"training-espionage\",\n        costs: { Armas: 500, Municion: 500, Dolares: 300 },\n        duration: \"00:23:20\",\n    },\n    {\n        id: \"seguridad\",\n        name: \"Seguridad\",\n        description: \"Seguridad te permite desarrollar todos los sistemas necesarios para proteger tu edificio. A mayor nivel alcanzado mejor ser\u00e1 tu defensa y tus chicos sabr\u00e1n defenderse con mayor eficacia ante ataques.\",\n        image: \"training-security\",\n        costs: { Armas: 1000, Municion: 4000, Dolares: 1000 },\n        duration: \"00:22:13\",\n    },\n];\n"
          },
          {
            "path": "src/lib/placeholder-images.ts",
            "code": "import data from './placeholder-images.json';\n\nexport type ImagePlaceholder = {\n  id: string;\n  description: string;\n  imageUrl: string;\n  imageHint: string;\n};\n\nexport const PlaceHolderImages: ImagePlaceholder[] = data.placeholderImages;\n"
          }
        ]
      },
      {
        "path": "src/components/ui/card.tsx",
        "code": "import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n",
        "dependencies": []
      }
    ]
  },
  "src/app/dashboard/resources/page.tsx": {
    "route": "/dashboard/resources",
    "code": "import { TotalProduction } from \"@/components/dashboard/resources/total-production\";\nimport { BuildingProduction } from \"@/components/dashboard/resources/building-production\";\nimport {\n    Select,\n    SelectContent,\n    SelectItem,\n    SelectTrigger,\n    SelectValue,\n  } from \"@/components/ui/select\"\n  \n\nexport default function ResourcesPage() {\n    return (\n        <div className=\"space-y-6\">\n            <div className=\"flex items-center gap-2\">\n                <span className=\"font-semibold\">Edificio:</span>\n                <Select defaultValue=\"34:13:129\">\n                    <SelectTrigger className=\"w-[180px] bg-stone-200 border-primary/50 text-black\">\n                        <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                        <SelectItem value=\"34:13:129\">34:13:129</SelectItem>\n                    </SelectContent>\n                </Select>\n            </div>\n            <TotalProduction />\n            <BuildingProduction />\n        </div>\n    );\n}",
    "components": [
      {
        "path": "src/components/dashboard/resources/building-production.tsx",
        "code": "import {\n    Card,\n    CardContent,\n    CardHeader,\n    CardTitle,\n} from \"@/components/ui/card\";\nimport {\n    Table,\n    TableBody,\n    TableCell,\n    TableHead,\n    TableHeader,\n    TableRow,\n} from \"@/components/ui/table\";\nimport { buildingProductionData } from \"@/lib/data/resources-data\";\n  \nexport function BuildingProduction() {\n    const totals = buildingProductionData.buildings.reduce((acc, building) => {\n        acc.armas += building.production.armas;\n        acc.municion += building.production.municion;\n        acc.alcohol += building.production.alcohol;\n        acc.dolares += building.production.dolares;\n        return acc;\n    }, { ...buildingProductionData.baseSalary });\n\n    return (\n        <Card className=\"border-primary bg-stone-200 text-black overflow-hidden\">\n            <CardHeader className=\"bg-primary/80 py-2 px-4\">\n                <CardTitle className=\"text-lg text-primary-foreground\">Edificio 34:13:129 / Recursos / Hora</CardTitle>\n            </CardHeader>\n            <CardContent className=\"p-0\">\n                <Table>\n                    <TableHeader>\n                        <TableRow className=\"bg-primary/70 hover:bg-primary/70\">\n                            <TableHead className=\"text-primary-foreground w-[200px]\"></TableHead>\n                            <TableHead className=\"text-primary-foreground text-center\">Armas</TableHead>\n                            <TableHead className=\"text-primary-foreground text-center\">Munici\u00f3n</TableHead>\n                            <TableHead className=\"text-primary-foreground text-center\">Alcohol</TableHead>\n                            <TableHead className=\"text-primary-foreground text-center\">D\u00f3lares</TableHead>\n                        </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                        <TableRow className=\"bg-stone-200 hover:bg-stone-300/60\">\n                            <TableCell className=\"font-semibold\">Salario base</TableCell>\n                            <TableCell className=\"text-center text-green-600 font-bold\">{buildingProductionData.baseSalary.armas}</TableCell>\n                            <TableCell className=\"text-center text-green-600 font-bold\">{buildingProductionData.baseSalary.municion}</TableCell>\n                            <TableCell className=\"text-center text-green-600 font-bold\">{buildingProductionData.baseSalary.alcohol}</TableCell>\n                            <TableCell className=\"text-center\">{buildingProductionData.baseSalary.dolares}</TableCell>\n                        </TableRow>\n                        {buildingProductionData.buildings.map((building) => (\n                            <TableRow key={building.name} className=\"bg-stone-200 hover:bg-stone-300/60\">\n                                <TableCell className=\"font-semibold\">{building.name} ({building.level})</TableCell>\n                                <TableCell className={`text-center ${building.production.armas > 0 ? 'text-green-600 font-bold' : ''}`}>{building.production.armas}</TableCell>\n                                <TableCell className={`text-center ${building.production.municion > 0 ? 'text-green-600 font-bold' : ''}`}>{building.production.municion}</TableCell>\n                                <TableCell className={`text-center ${building.production.alcohol > 0 ? 'text-green-600 font-bold' : ''}`}>{building.production.alcohol}</TableCell>\n                                <TableCell className={`text-center ${building.production.dolares > 0 ? 'text-green-600 font-bold' : ''}`}>{building.production.dolares}</TableCell>\n                            </TableRow>\n                        ))}\n                        <TableRow className=\"bg-primary/20 hover:bg-primary/30\">\n                            <TableCell className=\"font-semibold text-center text-lg\">=</TableCell>\n                            <TableCell className=\"text-center text-green-600 font-bold\">{totals.armas}</TableCell>\n                            <TableCell className=\"text-center text-green-600 font-bold\">{totals.municion}</TableCell>\n                            <TableCell className=\"text-center text-green-600 font-bold\">{totals.alcohol}</TableCell>\n                            <TableCell className=\"text-center\">{totals.dolares}</TableCell>\n                        </TableRow>\n                        <TableRow className=\"bg-stone-200 hover:bg-stone-300/60\">\n                            <TableCell className=\"font-semibold\">Capacidad de Almacenamiento</TableCell>\n                            <TableCell className=\"text-center\">{buildingProductionData.storage.capacity.armas.toLocaleString()}</TableCell>\n                            <TableCell className=\"text-center\">{buildingProductionData.storage.capacity.municion.toLocaleString()}</TableCell>\n                            <TableCell className=\"text-center\">{buildingProductionData.storage.capacity.alcohol.toLocaleString()}</TableCell>\n                            <TableCell className=\"text-center\">{buildingProductionData.storage.capacity.dolares.toLocaleString()}</TableCell>\n                        </TableRow>\n                        <TableRow className=\"bg-stone-200 hover:bg-stone-300/60\">\n                            <TableCell className=\"font-semibold\">Almacenados en forma segura</TableCell>\n                            <TableCell className=\"text-center\">{buildingProductionData.storage.safe.armas.toLocaleString()}</TableCell>\n                            <TableCell className=\"text-center\">{buildingProductionData.storage.safe.municion.toLocaleString()}</TableCell>\n                            <TableCell className=\"text-center\">{buildingProductionData.storage.safe.alcohol.toLocaleString()}</TableCell>\n                            <TableCell className=\"text-center\">{buildingProductionData.storage.safe.dolares.toLocaleString()}</TableCell>\n                        </TableRow>\n                    </TableBody>\n                </Table>\n            </CardContent>\n        </Card>\n    );\n}\n",
        "dependencies": [
          {
            "path": "src/lib/data/resources-data.ts",
            "code": "export const totalProductionData = [\n    { resource: 'Armas', hour: 10, day: 240 },\n    { resource: 'Municion', hour: 20, day: 480 },\n    { resource: 'Alcohol', hour: 60, day: 1440 },\n    { resource: 'Dolares', hour: 0, day: 0 },\n];\n  \nexport const buildingProductionData = {\n    baseSalary: { armas: 10, municion: 10, alcohol: 10, dolares: 0 },\n    buildings: [\n        { name: 'Almac\u00e9n de munici\u00f3n', level: 1, production: { armas: 0, municion: 10, alcohol: 0, dolares: 0 } },\n        { name: 'Cervecer\u00eda', level: 1, production: { armas: 0, municion: 0, alcohol: 50, dolares: 0 } },\n    ],\n    storage: {\n        capacity: { armas: 10000, municion: 10000, alcohol: 10000, dolares: 10000 },\n        safe: { armas: 1000, municion: 1000, alcohol: 1000, dolares: 1000 },\n    }\n};"
          }
        ]
      },
      {
        "path": "src/components/dashboard/resources/total-production.tsx",
        "code": "import {\n    Card,\n    CardContent,\n    CardHeader,\n    CardTitle,\n  } from \"@/components/ui/card\";\nimport {\n    Table,\n    TableBody,\n    TableCell,\n    TableHead,\n    TableHeader,\n    TableRow,\n  } from \"@/components/ui/table\";\nimport { totalProductionData } from \"@/lib/data/resources-data\";\n\nexport function TotalProduction() {\n    return (\n        <Card className=\"border-primary bg-stone-200 text-black overflow-hidden\">\n            <CardHeader className=\"bg-primary/80 py-2 px-4\">\n                <CardTitle className=\"text-lg text-primary-foreground\">Producci\u00f3n Total</CardTitle>\n            </CardHeader>\n            <CardContent className=\"p-0\">\n                <Table>\n                    <TableHeader>\n                        <TableRow className=\"bg-primary/70 hover:bg-primary/70\">\n                            <TableHead className=\"text-primary-foreground w-1/3\">Recurso</TableHead>\n                            <TableHead className=\"text-primary-foreground text-center\">Hora</TableHead>\n                            <TableHead className=\"text-primary-foreground text-center\">D\u00eda</TableHead>\n                        </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                        {totalProductionData.map((item) => (\n                            <TableRow key={item.resource} className=\"bg-stone-200 hover:bg-stone-300/60\">\n                                <TableCell className=\"font-semibold\">{item.resource}</TableCell>\n                                <TableCell className=\"text-center\">{item.hour}</TableCell>\n                                <TableCell className=\"text-center\">{item.day.toLocaleString()}</TableCell>\n                            </TableRow>\n                        ))}\n                    </TableBody>\n                </Table>\n            </CardContent>\n        </Card>\n    );\n}\n",
        "dependencies": [
          {
            "path": "src/lib/data/resources-data.ts",
            "code": "export const totalProductionData = [\n    { resource: 'Armas', hour: 10, day: 240 },\n    { resource: 'Municion', hour: 20, day: 480 },\n    { resource: 'Alcohol', hour: 60, day: 1440 },\n    { resource: 'Dolares', hour: 0, day: 0 },\n];\n  \nexport const buildingProductionData = {\n    baseSalary: { armas: 10, municion: 10, alcohol: 10, dolares: 0 },\n    buildings: [\n        { name: 'Almac\u00e9n de munici\u00f3n', level: 1, production: { armas: 0, municion: 10, alcohol: 0, dolares: 0 } },\n        { name: 'Cervecer\u00eda', level: 1, production: { armas: 0, municion: 0, alcohol: 50, dolares: 0 } },\n    ],\n    storage: {\n        capacity: { armas: 10000, municion: 10000, alcohol: 10000, dolares: 10000 },\n        safe: { armas: 1000, municion: 1000, alcohol: 1000, dolares: 1000 },\n    }\n};"
          }
        ]
      },
      {
        "path": "src/components/ui/select.tsx",
        "code": "\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n",
        "dependencies": []
      }
    ]
  },
  "src/app/dashboard/poderataque/page.tsx": {
    "route": "/dashboard/poderataque",
    "code": "import {\n    Card,\n    CardContent,\n    CardHeader,\n    CardTitle,\n  } from \"@/components/ui/card\";\nimport {\n    Table,\n    TableBody,\n    TableCell,\n    TableHead,\n    TableHeader,\n    TableRow,\n  } from \"@/components/ui/table\";\nimport { attackPowerData } from \"@/lib/data/poderataque-data\";\n\nexport default function AttackPowerPage() {\n    return (\n        <Card className=\"border-primary bg-stone-200 text-black overflow-hidden\">\n            <CardHeader className=\"bg-primary/80 py-3 px-4\">\n                <CardTitle className=\"text-xl text-primary-foreground\">\n                    Poder de ataque ( % )\n                </CardTitle>\n            </CardHeader>\n            <CardContent className=\"p-0\">\n                <div className=\"overflow-x-auto\">\n                    <Table>\n                        <TableHeader>\n                            <TableRow className=\"bg-primary/70 hover:bg-primary/70\">\n                                <TableHead className=\"text-primary-foreground font-bold align-bottom\" rowSpan={2}>Edificios</TableHead>\n                                <TableHead className=\"text-primary-foreground font-bold text-center\" colSpan={attackPowerData.honorLevels.length}>Onore</TableHead>\n                            </TableRow>\n                            <TableRow className=\"bg-primary/70 hover:bg-primary/70\">\n                                {attackPowerData.honorLevels.map(level => (\n                                    <TableHead key={level} className=\"text-primary-foreground text-center\">{level}</TableHead>\n                                ))}\n                            </TableRow>\n                        </TableHeader>\n                        <TableBody>\n                            {attackPowerData.buildingLevels.map((row, index) => (\n                                <TableRow key={index} className=\"bg-stone-200 hover:bg-stone-300/60\">\n                                    <TableCell className=\"font-semibold text-center\">{row.level}</TableCell>\n                                    {row.values.map((value, vIndex) => (\n                                        <TableCell key={vIndex} className=\"text-center\">{value}</TableCell>\n                                    ))}\n                                </TableRow>\n                            ))}\n                        </TableBody>\n                    </Table>\n                </div>\n            </CardContent>\n        </Card>\n    )\n}\n",
    "components": [
      {
        "path": "src/components/ui/card.tsx",
        "code": "import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n",
        "dependencies": []
      },
      {
        "path": "src/components/ui/table.tsx",
        "code": "import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n",
        "dependencies": []
      }
    ]
  },
  "src/app/dashboard/map/page.tsx": {
    "route": "/dashboard/map",
    "code": "import { MapControls } from \"@/components/dashboard/map/map-controls\";\nimport { CityMap } from \"@/components/dashboard/map/city-map\";\nimport {\n    Card,\n    CardContent,\n    CardHeader,\n    CardTitle,\n  } from \"@/components/ui/card\";\nimport { mapData } from \"@/lib/data/map-data\";\n\nexport default function MapPage() {\n    return (\n        <Card className=\"border-primary bg-stone-200 text-black\">\n            <CardHeader className=\"bg-primary/80 py-2 px-4\">\n                <CardTitle className=\"text-lg text-primary-foreground\">\n                    Mappa della citt\u00e0\n                </CardTitle>\n            </CardHeader>\n            <CardContent className=\"p-4 flex flex-col items-center gap-4\">\n                <MapControls />\n                <CityMap tiles={mapData} />\n            </CardContent>\n        </Card>\n    );\n}\n",
    "components": [
      {
        "path": "src/components/dashboard/map/city-map.tsx",
        "code": "'use client';\n\nimport {\n    Tooltip,\n    TooltipContent,\n    TooltipProvider,\n    TooltipTrigger,\n} from \"@/components/ui/tooltip\"\nimport { cn } from \"@/lib/utils\";\nimport type { Tile } from \"@/lib/data/map-data\";\n  \ntype CityMapProps = {\n    tiles: Tile[];\n};\n  \nconst tileColorClasses = {\n    gray: \"bg-gray-500\",\n    green: \"bg-green-600\",\n    blue: \"bg-blue-600\",\n    orange: \"bg-orange-500\",\n};\n\nexport function CityMap({ tiles }: CityMapProps) {\n    return (\n        <TooltipProvider>\n            <div className=\"w-full aspect-square max-w-[600px] bg-stone-800 p-2 rounded-md\">\n                <div className=\"grid grid-cols-15 gap-1 w-full h-full\">\n                    {tiles.map((tile) => (\n                        <Tooltip key={tile.id}>\n                            <TooltipTrigger asChild>\n                                <div className={cn(\n                                    \"w-full h-full border border-dashed border-white/20\",\n                                    tileColorClasses[tile.type as keyof typeof tileColorClasses],\n                                    tile.isCenter && \"ring-2 ring-red-500\"\n                                )}>\n                                    {tile.isCenter && (\n                                        <div className=\"relative w-full h-full\">\n                                            <span className=\"absolute top-0 left-0 bg-red-600 text-white text-[8px] leading-none px-0.5\">1</span>\n                                            <span className=\"absolute top-0 right-0 bg-red-600 text-white text-[8px] leading-none px-0.5\">1</span>\n                                        </div>\n                                    )}\n                                </div>\n                            </TooltipTrigger>\n                            <TooltipContent className=\"bg-yellow-100 text-black border-yellow-300\">\n                                {tile.info ? (\n                                    <>\n                                        <p className=\"font-bold\">Posici\u00f3n {tile.info.position}</p>\n                                        <p>{tile.info.owner}</p>\n                                        <p>{tile.info.points} Puntos</p>\n                                    </>\n                                ) : (\n                                    <p>Posici\u00f3n vac\u00eda</p>\n                                )}\n                            </TooltipContent>\n                        </Tooltip>\n                    ))}\n                </div>\n            </div>\n        </TooltipProvider>\n    );\n}\n\n// Extend Tailwind config for 15 columns\n// Add to tailwind.config.ts -> theme.extend.gridTemplateColumns\n// '15': 'repeat(15, minmax(0, 1fr))',\n// For this specific component, we will use inline style in the grid div\n// to avoid modifying the global config for a single use case.\n// The grid-cols-15 class is not standard in Tailwind, so we'll use a direct style.\n// Let's create it on the file.\nconst style = document.createElement('style');\nstyle.innerHTML = `\n  .grid-cols-15 {\n    grid-template-columns: repeat(15, minmax(0, 1fr));\n  }\n`;\ndocument.head.appendChild(style);\n",
        "dependencies": [
          {
            "path": "src/lib/data/map-data.ts",
            "code": "export type Tile = {\n    id: number;\n    type: 'gray' | 'green' | 'blue' | 'orange';\n    isCenter?: boolean;\n    info?: {\n        position: string;\n        owner: string;\n        points: number;\n    };\n};\n\nconst tileTypes: Tile['type'][] = ['gray', 'green', 'blue', 'orange'];\nconst totalTiles = 15 * 15;\n\nexport const mapData: Tile[] = Array.from({ length: totalTiles }, (_, i) => {\n    const x = i % 15;\n    const y = Math.floor(i / 15);\n    const tile: Tile = {\n        id: i,\n        type: tileTypes[Math.floor(Math.random() * tileTypes.length)],\n    };\n\n    if (x === 7 && y === 7) {\n        tile.isCenter = true;\n        tile.info = {\n            position: '34:13:128',\n            owner: 'niyose',\n            points: 13,\n        };\n    }\n    \n    return tile;\n});\n"
          },
          {
            "path": "src/lib/utils.ts",
            "code": "import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"
          }
        ]
      },
      {
        "path": "src/components/dashboard/map/map-controls.tsx",
        "code": "\"use client\";\n\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\n\nexport function MapControls() {\n    return (\n        <div className=\"bg-stone-300/80 p-4 rounded-md border border-primary/30 w-full max-w-md\">\n            <form className=\"flex flex-col items-center gap-3\">\n                <div className=\"flex items-center gap-4\">\n                    <div className=\"flex items-center gap-2\">\n                        <Label htmlFor=\"city\" className=\"text-sm\">Ciudad</Label>\n                        <Input id=\"city\" defaultValue=\"34\" className=\"w-20 h-8\" />\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                        <Label htmlFor=\"neighborhood\" className=\"text-sm\">Barrio</Label>\n                        <Input id=\"neighborhood\" defaultValue=\"13\" className=\"w-20 h-8\" />\n                    </div>\n                </div>\n                <Button type=\"submit\" variant=\"outline\" size=\"sm\" className=\"h-8\">Actualizar</Button>\n            </form>\n        </div>\n    );\n}\n",
        "dependencies": []
      },
      {
        "path": "src/components/ui/card.tsx",
        "code": "import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n",
        "dependencies": []
      }
    ]
  },
  "src/app/dashboard/overview/page.tsx": {
    "route": "/dashboard/overview",
    "code": "import { OverviewContent } from \"@/components/dashboard/overview/overview-content\";\n\nexport default function OverviewPage() {\n    return <OverviewContent />;\n}\n",
    "components": [
      {
        "path": "src/components/dashboard/overview/overview-content.tsx",
        "code": "'use client';\n\nimport { useGameState } from '@/components/providers/game-state-provider';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Table, TableBody, TableCell, TableHead, TableRow } from '@/components/ui/table';\nimport { cn } from '@/lib/utils';\n\nexport function OverviewContent() {\n  const { gameState } = useGameState();\n\n  if (!gameState) {\n    return <div className=\"p-4 text-center\">Cargando datos del imperio...</div>;\n  }\n\n  const { propiedad, recursos, edificios, puntos } = gameState;\n\n  const resourceList = [\n    { name: \"Armas\", value: recursos.armas.val, max: recursos.armas.max, highlight: recursos.armas.val >= recursos.armas.max },\n    { name: \"Munici\u00f3n\", value: recursos.municion.val, max: recursos.municion.max, highlight: recursos.municion.val >= recursos.municion.max },\n    { name: \"Alcohol\", value: recursos.alcohol.val, max: recursos.alcohol.max, highlight: recursos.alcohol.val >= recursos.alcohol.max },\n    { name: \"D\u00f3lares\", value: recursos.dolares.val, max: recursos.dolares.max, highlight: recursos.dolares.val >= recursos.dolares.max },\n  ];\n\n  // Find main building (Oficina del Jefe)\n  const mainBuilding = edificios.find(e => e.id === 'oficina_del_jefe');\n  const mainBuildingLevel = mainBuilding ? mainBuilding.nivel : 0;\n  const mainBuildingName = mainBuilding ? mainBuilding.nombre : \"Oficina del Jefe\";\n\n  // Calculate stats (Mock logic based on available data)\n  const totalBuildingsLevel = edificios.reduce((acc, curr) => acc + curr.nivel, 0);\n\n  // Research levels are not in 'edificios'. They are in 'entrenamiento_usuario' table, not fetched in RPC currently except if I added it.\n  // The RPC only fetches 'edificios'. The prompt didn't ask for research levels in DashboardData explicitly but Overview had it.\n  // I'll skip research level summary for now or use a placeholder/0.\n  const researchLevel = 0;\n\n  const levels = [\n      { name: \"Edificios\", level: totalBuildingsLevel },\n      { name: \"Investigaci\u00f3n\", level: researchLevel }\n  ];\n\n  return (\n    <Card className=\"border-primary bg-stone-200 text-black overflow-hidden\">\n        <CardHeader className=\"bg-primary/80 py-3 px-4\">\n            <CardTitle className=\"text-xl text-primary-foreground\">\n                Visi\u00f3n Global {propiedad.nombre}\n            </CardTitle>\n        </CardHeader>\n        <CardContent className=\"p-0\">\n            <div className=\"overflow-x-auto\">\n                <Table>\n                    <TableBody>\n                        <TableRow className=\"bg-primary/70 hover:bg-primary/70\">\n                            <TableHead className=\"text-primary-foreground font-bold\">{mainBuildingName}</TableHead>\n                            <TableHead className=\"text-primary-foreground font-bold text-center\">Nivel {mainBuildingLevel}</TableHead>\n                            <TableHead className=\"text-primary-foreground font-bold text-center\">=</TableHead>\n                        </TableRow>\n                        {resourceList.map((resource, index) => (\n                            <TableRow key={index} className=\"bg-stone-200 hover:bg-stone-300/60\">\n                                <TableCell className=\"font-semibold\">{resource.name}</TableCell>\n                                <TableCell className={cn(\"text-center font-semibold\", resource.highlight && \"text-red-600\")}>\n                                    {Math.floor(resource.value).toLocaleString()} (max. {resource.max.toLocaleString()})\n                                </TableCell>\n                                <TableCell className=\"text-center\">\n                                    {Math.floor(resource.value).toLocaleString()} (max. {resource.max.toLocaleString()})\n                                </TableCell>\n                            </TableRow>\n                        ))}\n                        {levels.map((item, index) => (\n                            <TableRow key={index} className=\"bg-stone-200 hover:bg-stone-300/60\">\n                                <TableCell className=\"font-semibold\">{item.name}</TableCell>\n                                <TableCell className=\"text-center font-bold\">{item.level}</TableCell>\n                                <TableCell className=\"text-center\">{item.level}</TableCell>\n                            </TableRow>\n                        ))}\n                         <TableRow className=\"bg-stone-200 hover:bg-stone-300/60\">\n                            <TableCell className=\"font-semibold\">Puntos</TableCell>\n                            <TableCell className=\"text-center font-bold\">{Math.floor(puntos).toLocaleString()}</TableCell>\n                            <TableCell className=\"text-center\">{Math.floor(puntos).toLocaleString()}</TableCell>\n                        </TableRow>\n                    </TableBody>\n                </Table>\n            </div>\n        </CardContent>\n    </Card>\n  );\n}\n",
        "dependencies": [
          {
            "path": "src/components/providers/game-state-provider.tsx",
            "code": "'use client';\n\nimport React, { createContext, useContext, ReactNode } from 'react';\nimport { DashboardData } from '@/types/game';\nimport { useGameRealtime } from '@/hooks/use-game-realtime';\n\ninterface GameStateContextType {\n  gameState: DashboardData | null;\n}\n\nconst GameStateContext = createContext<GameStateContextType | undefined>(undefined);\n\ninterface GameStateProviderProps {\n  initialData: DashboardData | null;\n  children: ReactNode;\n}\n\nexport function GameStateProvider({ initialData, children }: GameStateProviderProps) {\n  const gameState = useGameRealtime(initialData);\n\n  return (\n    <GameStateContext.Provider value={{ gameState }}>\n      {children}\n    </GameStateContext.Provider>\n  );\n}\n\nexport function useGameState() {\n  const context = useContext(GameStateContext);\n  if (context === undefined) {\n    throw new Error('useGameState must be used within a GameStateProvider');\n  }\n  return context;\n}\n"
          },
          {
            "path": "src/lib/utils.ts",
            "code": "import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"
          }
        ]
      }
    ]
  },
  "src/app/dashboard/recruitment/page.tsx": {
    "route": "/dashboard/recruitment",
    "code": "import { recruitmentData, recruitmentQueue } from \"@/lib/data/recruitment-data\";\nimport { TroopCard } from \"@/components/dashboard/recruitment/troop-card\";\nimport {\n    Card,\n    CardContent,\n    CardHeader,\n    CardTitle,\n  } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\n\nexport default function RecruitmentPage() {\n  return (\n    <div className=\"space-y-4\">\n        <Card className=\"border-primary bg-stone-200 text-black\">\n            <CardHeader className=\"bg-primary/80 py-2 px-4\">\n                <CardTitle className=\"text-lg text-primary-foreground\">\n                    Reclutamiento\n                </CardTitle>\n            </CardHeader>\n            <CardContent className=\"p-4 flex flex-col items-center gap-2\">\n                <Select>\n                    <SelectTrigger className=\"w-full bg-white\">\n                        <SelectValue placeholder=\"Cola de reclutamiento\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                        {recruitmentQueue.map((item, index) => (\n                            <SelectItem key={index} value={`${item.name}-${index}`}>\n                                {item.quantity} {item.name} - Durata {item.duration}\n                            </SelectItem>\n                        ))}\n                    </SelectContent>\n                </Select>\n                <Button variant=\"outline\" size=\"sm\">Cancella truppe selezionate</Button>\n                <p className=\"text-xs\">Durata dell'elenco d' attesa: {recruitmentQueue[0]?.duration || '00:00:00'}</p>\n            </CardContent>\n        </Card>\n        <div className=\"space-y-2\">\n            {recruitmentData.map((troop) => (\n                <TroopCard key={troop.id} troop={troop} />\n            ))}\n        </div>\n    </div>\n  );\n}\n",
    "components": [
      {
        "path": "src/components/dashboard/recruitment/troop-card.tsx",
        "code": "'use client';\n\nimport Image from \"next/image\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { PlaceHolderImages } from \"@/lib/placeholder-images\";\nimport { Coins, Shell, Droplets } from \"lucide-react\";\nimport { ReactNode } from \"react\";\nimport type { Troop as TroopData } from \"@/lib/data/recruitment-data\";\n\n\ntype TroopCardProps = {\n  troop: TroopData;\n};\n\nconst ResourceIcon = ({ type }: { type: string }) => {\n    switch (type) {\n        case 'Armas': return <Shell className=\"w-4 h-4 inline-block ml-1\" />;\n        case 'Municion': return <Coins className=\"w-4 h-4 inline-block ml-1\" />;\n        case 'Alcohol': return <Droplets className=\"w-4 h-4 inline-block ml-1\" />;\n        case 'Dolares': return <p className=\"text-lg font-bold text-green-600 inline-block ml-1\">$</p>;\n        default: return null;\n    }\n}\n\nexport function TroopCard({ troop }: TroopCardProps) {\n  const image = PlaceHolderImages.find((p) => p.id === troop.image) || PlaceHolderImages.find(p => p.id === 'dark-alley');\n\n  return (\n    <div className=\"bg-stone-200 text-black p-4 rounded-md border border-primary/50 flex flex-col items-start gap-4\">\n        <h3 className=\"font-bold text-lg text-primary\">{troop.name}</h3>\n        <div className=\"flex flex-col md:flex-row gap-4 w-full\">\n            <div className=\"flex-shrink-0 w-24\">\n                {image && (\n                    <Image\n                        src={image.imageUrl}\n                        alt={image.description}\n                        width={100}\n                        height={100}\n                        className=\"rounded w-full h-auto object-cover\"\n                        data-ai-hint={image.imageHint}\n                    />\n                )}\n                <p className=\"text-xs text-center mt-1\">{troop.duration}</p>\n            </div>\n            <div className=\"flex-1\">\n                <p className=\"text-sm mb-2\">{troop.description}</p>\n                <div className=\"flex items-center flex-wrap gap-x-4 gap-y-1 text-sm border-t border-b border-black/10 py-2\">\n                {Object.entries(troop.costs).map(([resource, value]) => (\n                    <div key={resource} className=\"flex items-center\">\n                    <span>{resource.charAt(0)}: {value}</span>\n                    <ResourceIcon type={resource} />\n                    </div>\n                ))}\n                </div>\n            </div>\n            <div className=\"flex flex-col items-center gap-2\">\n                <Input type=\"number\" placeholder=\"0\" className=\"w-20 h-8 text-sm text-center\" />\n                <div className=\"flex gap-1\">\n                    <Button variant=\"destructive\" size=\"sm\" className=\"bg-accent hover:bg-accent/90 h-8 text-xs\">\n                        Ir!\n                    </Button>\n                    <Button variant=\"outline\" size=\"sm\" className=\"h-8 text-xs\">Max</Button>\n                </div>\n            </div>\n        </div>\n    </div>\n  );\n}\n",
        "dependencies": [
          {
            "path": "src/lib/data/recruitment-data.ts",
            "code": "export type Troop = {\n    id: string;\n    name: string;\n    description: string;\n    image: string;\n    stats: {\n        attack: number;\n        defense: number;\n        speed: number;\n        capacity: number;\n    };\n    costs: {\n        Armas?: number;\n        Municion?: number;\n        Alcohol?: number;\n        Dolares?: number;\n    };\n    duration: string;\n};\n\nexport const recruitmentData: Troop[] = [\n    {\n        id: \"porteador\",\n        name: \"Porteador\",\n        description: \"Los porteadores son meras unidades civiles, que simplemente llevan cosas de aqu\u00ed para all\u00e1. Por lo cual s\u00f3lo los deber\u00edas utilizar como unidad de transporte y no como unidades de combate.\",\n        image: \"troop-porteador\",\n        stats: { attack: 0, defense: 0, speed: 10, capacity: 1000 },\n        costs: { Armas: 300, Municion: 100, Dolares: 1000 },\n        duration: \"01:00:00\",\n    },\n    {\n        id: \"maton\",\n        name: \"Mat\u00f3n\",\n        description: \"Los Matones son unidades de combate simple, no dejar\u00e1n escapar la oportunidad de atacar a cualquier unidad enemiga que detecte. En cantidades grandes incluso pueden ser muy peligrosos.\",\n        image: \"troop-maton\",\n        stats: { attack: 10, defense: 5, speed: 10, capacity: 50 },\n        costs: { Armas: 200, Municion: 1000 },\n        duration: \"00:23:20\",\n    },\n    {\n        id: \"asesino\",\n        name: \"Asesino\",\n        description: \"El Asesino es una unidad especializada en el sigilo y la eliminaci\u00f3n de objetivos clave. Alto ataque, pero baja defensa.\",\n        image: \"troop-assassin\",\n        stats: { attack: 30, defense: 10, speed: 15, capacity: 20 },\n        costs: { Armas: 150, Municion: 100, Dolares: 50 },\n        duration: \"00:05:00\",\n    },\n    {\n        id: \"gorila\",\n        name: \"Gorila\",\n        description: \"El Gorila es la unidad de defensa principal. Con una gran cantidad de puntos de vida y defensa, son perfectos para proteger tu territorio.\",\n        image: \"troop-enforcer\",\n        stats: { attack: 5, defense: 40, speed: 5, capacity: 10 },\n        costs: { Armas: 80, Municion: 200, Alcohol: 10 },\n        duration: \"00:08:20\",\n    },\n    {\n        id: \"consigliere\",\n        name: \"Consigliere\",\n        description: \"El Consigliere no es un luchador, pero reduce el costo de reclutamiento y construcci\u00f3n. Una unidad de apoyo invaluable.\",\n        image: \"troop-consigliere\",\n        stats: { attack: 0, defense: 5, speed: 8, capacity: 5 },\n        costs: { Dolares: 1000, Alcohol: 50 },\n        duration: \"00:15:00\",\n    },\n];\n\nexport const recruitmentQueue = [\n    { name: \"Porteador\", quantity: 1, duration: \"00:59:59\" }\n]\n"
          },
          {
            "path": "src/lib/placeholder-images.ts",
            "code": "import data from './placeholder-images.json';\n\nexport type ImagePlaceholder = {\n  id: string;\n  description: string;\n  imageUrl: string;\n  imageHint: string;\n};\n\nexport const PlaceHolderImages: ImagePlaceholder[] = data.placeholderImages;\n"
          }
        ]
      },
      {
        "path": "src/components/ui/button.tsx",
        "code": "import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n",
        "dependencies": []
      },
      {
        "path": "src/components/ui/card.tsx",
        "code": "import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n",
        "dependencies": []
      },
      {
        "path": "src/components/ui/select.tsx",
        "code": "\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n",
        "dependencies": []
      }
    ]
  },
  "src/app/dashboard/tech-tree/page.tsx": {
    "route": "/dashboard/tech-tree",
    "code": "\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\nimport { TechTreeTable } from \"@/components/dashboard/tech-tree/tech-tree-table\";\nimport { roomsTechData, trainingTechData } from \"@/lib/data/tech-tree-data\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\n\nexport default function TechTreePage() {\n  return (\n    <div className=\"space-y-4\">\n        <Card className=\"border-primary bg-stone-200 text-black\">\n            <CardHeader className=\"bg-primary/80 py-2 px-4\">\n                <CardTitle className=\"text-lg text-primary-foreground\">\n                    \u00c1rbol Tecnol\u00f3gico\n                </CardTitle>\n            </CardHeader>\n            <CardContent className=\"p-4\">\n                <Tabs defaultValue=\"rooms\">\n                    <div className=\"flex justify-between items-start\">\n                        <TabsList className=\"bg-stone-300\">\n                            <TabsTrigger value=\"rooms\" className=\"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground\">Habitaciones</TabsTrigger>\n                            <TabsTrigger value=\"training\" className=\"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground\">Entrenamientos</TabsTrigger>\n                            <TabsTrigger value=\"troops\" className=\"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground\">Tropas</TabsTrigger>\n                        </TabsList>\n                        <div className=\"text-sm text-right\">\n                            <div className=\"flex items-center gap-2\">\n                                <div className=\"w-4 h-4 border-2 border-dashed border-green-500\"></div>\n                                <span>Disponible</span>\n                            </div>\n                            <div className=\"flex items-center gap-2\">\n                                <div className=\"w-4 h-4 border-2 border-dashed border-red-500\"></div>\n                                <span>No disponible</span>\n                            </div>\n                        </div>\n                    </div>\n                    <TabsContent value=\"rooms\">\n                        <TechTreeTable data={roomsTechData} />\n                    </TabsContent>\n                    <TabsContent value=\"training\">\n                        <TechTreeTable data={trainingTechData} />\n                    </TabsContent>\n                    <TabsContent value=\"troops\">\n                        <p className=\"p-4 text-center\">Contenido de Tropas no disponible.</p>\n                    </TabsContent>\n                </Tabs>\n            </CardContent>\n        </Card>\n    </div>\n  );\n}\n",
    "components": [
      {
        "path": "src/components/dashboard/tech-tree/tech-tree-table.tsx",
        "code": "\n'use client';\nimport Image from \"next/image\";\nimport { PlaceHolderImages } from \"@/lib/placeholder-images\";\nimport type { TechItem } from \"@/lib/data/tech-tree-data\";\nimport { cn } from \"@/lib/utils\";\n\ntype TechTreeTableProps = {\n    data: TechItem[];\n};\n\nexport function TechTreeTable({ data }: TechTreeTableProps) {\n    return (\n        <div className=\"mt-4 border border-primary/50 rounded-md\">\n            <div className=\"grid grid-cols-2 bg-primary/80 text-primary-foreground font-bold rounded-t-md\">\n                <div className=\"p-2\">Habitaci\u00f3n</div>\n                <div className=\"p-2\">Requisitos (Nivel)</div>\n            </div>\n            <div className=\"divide-y divide-primary/30\">\n                {data.map((item) => {\n                    const image = PlaceHolderImages.find((p) => p.id === item.image);\n                    return (\n                        <div key={item.id} className=\"grid grid-cols-2 items-center\">\n                            <div className=\"p-2 flex flex-col items-center justify-center text-center\">\n                                {image && (\n                                    <Image\n                                        src={image.imageUrl}\n                                        alt={image.description}\n                                        width={80}\n                                        height={60}\n                                        className={cn(\n                                            \"rounded border-2 border-dashed object-cover w-20 h-16\",\n                                            item.available ? \"border-green-500\" : \"border-red-500\"\n                                        )}\n                                        data-ai-hint={image.imageHint}\n                                    />\n                                )}\n                                <span className=\"text-sm mt-1 font-medium\">{item.name}</span>\n                            </div>\n                            <div className=\"p-2 text-sm\">\n                                {item.requirements.length > 0 ? (\n                                    <ul className=\"list-none\">\n                                        {item.requirements.map((req, index) => (\n                                            <li key={index}>\n                                                {req.name} <span className=\"text-red-500 font-bold\">({req.level})</span>\n                                            </li>\n                                        ))}\n                                    </ul>\n                                ) : (\n                                    <span>-</span>\n                                )}\n                            </div>\n                        </div>\n                    );\n                })}\n            </div>\n        </div>\n    );\n}\n",
        "dependencies": [
          {
            "path": "src/lib/data/tech-tree-data.ts",
            "code": "\n\nexport type Requirement = {\n    name: string;\n    level: number;\n};\n  \nexport type TechItem = {\n    id: string;\n    name: string;\n    image: string;\n    available: boolean;\n    requirements: Requirement[];\n};\n  \nexport const roomsTechData: TechItem[] = [\n    {\n        id: \"oficina-jefe\",\n        name: \"Oficina del Jefe\",\n        image: \"room-office\",\n        available: true,\n        requirements: [],\n    },\n    {\n        id: \"escuela-especializacion\",\n        name: \"Escuela de especializaci\u00f3n\",\n        image: \"room-specialization\",\n        available: true,\n        requirements: [],\n    },\n    {\n        id: \"armeria\",\n        name: \"Armer\u00eda\",\n        image: \"room-armory\",\n        available: true,\n        requirements: [],\n    },\n    {\n        id: \"almacen-municion\",\n        name: \"Almac\u00e9n de munici\u00f3n\",\n        image: \"room-ammo\",\n        available: true,\n        requirements: [],\n    },\n    {\n        id: \"cerveceria\",\n        name: \"Cervecer\u00eda\",\n        image: \"room-brewery\",\n        available: true,\n        requirements: [],\n    },\n    {\n        id: \"taberna\",\n        name: \"Taberna\",\n        image: \"room-tavern\",\n        available: false,\n        requirements: [{ name: \"Cervecer\u00eda\", level: 1 }],\n    },\n    {\n        id: \"contrabando\",\n        name: \"Contrabando\",\n        image: \"room-contraband\",\n        available: false,\n        requirements: [\n            { name: \"Oficina del Jefe\", level: 5 },\n            { name: \"Cervecer\u00eda\", level: 8 }\n        ],\n    },\n    {\n        id: \"almacen-armas\",\n        name: \"Almac\u00e9n de armas\",\n        image: \"room-armory\",\n        available: false,\n        requirements: [{ name: \"Armer\u00eda\", level: 5 }],\n    },\n    {\n        id: \"deposito-municion\",\n        name: \"Dep\u00f3sito de munici\u00f3n\",\n        image: \"room-ammo\",\n        available: false,\n        requirements: [{ name: \"Almac\u00e9n de munici\u00f3n\", level: 5 }],\n    },\n    {\n        id: \"almacen-alcohol\",\n        name: \"Almac\u00e9n de alcohol\",\n        image: \"room-brewery\",\n        available: false,\n        requirements: [{ name: \"Cervecer\u00eda\", level: 5 }],\n    },\n    {\n        id: \"caja-fuerte\",\n        name: \"Caja fuerte\",\n        image: \"room-vault\",\n        available: false,\n        requirements: [{ name: \"Taberna\", level: 5 }],\n    },\n    {\n        id: \"campo-entrenamiento\",\n        name: \"Campo de entrenamiento\",\n        image: \"room-training\",\n        available: true,\n        requirements: [],\n    },\n    {\n        id: \"seguridad\",\n        name: \"Seguridad\",\n        image: \"room-security\",\n        available: false,\n        requirements: [{ name: \"Campo de entrenamiento\", level: 2 }],\n    },\n    {\n        id: \"torreta-fuego-automatico\",\n        name: \"Torreta de fuego autom\u00e1tico\",\n        image: \"room-turret\",\n        available: false,\n        requirements: [{ name: \"Oficina del Jefe\", level: 5 }],\n    },\n    {\n        id: \"minas-ocultas\",\n        name: \"Minas ocultas\",\n        image: \"room-mines\",\n        available: false,\n        requirements: [{ name: \"Oficina del Jefe\", level: 5 }],\n    },\n];\n\n\nexport const trainingTechData: TechItem[] = [\n    {\n      id: \"planificacion-rutas\",\n      name: \"Planificaci\u00f3n de rutas\",\n      image: \"training-routes\",\n      available: true,\n      requirements: [],\n    },\n    {\n      id: \"planificacion-encargos\",\n      name: \"Planificaci\u00f3n de encargos\",\n      image: \"training-planning\",\n      available: false,\n      requirements: [{ name: \"Planificaci\u00f3n de rutas\", level: 4 }],\n    },\n    {\n      id: \"extorsion\",\n      name: \"Extorsi\u00f3n\",\n      image: \"training-extortion\",\n      available: true,\n      requirements: [],\n    },\n    {\n      id: \"administracion-base\",\n      name: \"Administraci\u00f3n de base\",\n      image: \"training-base-admin\",\n      available: false,\n      requirements: [{ name: \"Seguridad\", level: 5 }],\n    },\n    {\n      id: \"contrabando-training\",\n      name: \"Contrabando\",\n      image: \"room-contraband\",\n      available: false,\n      requirements: [{ name: \"Planificaci\u00f3n de encargos\", level: 1 }],\n    },\n    {\n      id: \"espionaje\",\n      name: \"Espionaje\",\n      image: \"training-espionage\",\n      available: true,\n      requirements: [],\n    },\n    {\n      id: \"seguridad\",\n      name: \"Seguridad\",\n      image: \"training-security\",\n      available: true,\n      requirements: [],\n    },\n    {\n      id: \"proteccion-grupo\",\n      name: \"Protecci\u00f3n de grupo\",\n      image: \"room-contraband\",\n      available: false,\n      requirements: [{ name: \"Seguridad\", level: 4 }],\n    },\n    {\n      id: \"combate-cuerpo-a-cuerpo\",\n      name: \"Combate cuerpo a cuerpo\",\n      image: \"training-hand-combat\",\n      available: false,\n      requirements: [{ name: \"Extorsi\u00f3n\", level: 3 }],\n    },\n    {\n      id: \"combate-armas-corta-distancia\",\n      name: \"Combate de armas a corta distancia\",\n      image: \"training-close-combat\",\n      available: false,\n      requirements: [{ name: \"Extorsi\u00f3n\", level: 5 }],\n    },\n    {\n      id: \"entrenamiento-tiro\",\n      name: \"Entrenamiento de Tiro\",\n      image: \"training-shooting\",\n      available: false,\n      requirements: [\n        { name: \"Combate de armas a corta distancia\", level: 4 },\n        { name: \"Protecci\u00f3n de grupo\", level: 4 },\n      ],\n    },\n    {\n      id: \"fabricacion-explosivos\",\n      name: \"Fabricaci\u00f3n de explosivos\",\n      image: \"training-explosives\",\n      available: false,\n      requirements: [\n        { name: \"Planificaci\u00f3n de encargos\", level: 4 },\n        { name: \"Combate cuerpo a cuerpo\", level: 4 },\n      ],\n    },\n    {\n      id: \"entrenamiento-guerrilla\",\n      name: \"Entrenamiento de guerrilla\",\n      image: \"training-guerrilla\",\n      available: false,\n      requirements: [\n        { name: \"Seguridad\", level: 6 },\n        { name: \"Entrenamiento de Tiro\", level: 6 },\n      ],\n    },\n    {\n      id: \"entrenamiento-psicologico\",\n      name: \"Entrenamiento psicol\u00f3gico\",\n      image: \"training-psychological\",\n      available: false,\n      requirements: [{ name: \"Entrenamiento de guerrilla\", level: 4 }],\n    },\n    {\n      id: \"entrenamiento-quimico\",\n      name: \"Entrenamiento Qu\u00edmico\",\n      image: \"training-chemical\",\n      available: false,\n      requirements: [\n        { name: \"Fabricaci\u00f3n de explosivos\", level: 4 },\n        { name: \"Entrenamiento psicol\u00f3gico\", level: 4 },\n      ],\n    },\n    {\n      id: \"honor\",\n      name: \"Honor\",\n      image: \"training-honor\",\n      available: false,\n      requirements: [\n        { name: \"Espionaje\", level: 8 },\n        { name: \"Contrabando\", level: 8 },\n      ],\n    },\n  ];\n"
          },
          {
            "path": "src/lib/placeholder-images.ts",
            "code": "import data from './placeholder-images.json';\n\nexport type ImagePlaceholder = {\n  id: string;\n  description: string;\n  imageUrl: string;\n  imageHint: string;\n};\n\nexport const PlaceHolderImages: ImagePlaceholder[] = data.placeholderImages;\n"
          },
          {
            "path": "src/lib/utils.ts",
            "code": "import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"
          }
        ]
      },
      {
        "path": "src/components/ui/card.tsx",
        "code": "import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n",
        "dependencies": []
      },
      {
        "path": "src/components/ui/tabs.tsx",
        "code": "\"use client\"\n\nimport * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n",
        "dependencies": []
      }
    ]
  },
  "src/app/dashboard/rooms/page.tsx": {
    "route": "/dashboard/rooms",
    "code": "import { roomsData } from \"@/lib/data/rooms-data\";\nimport { RoomCard } from \"@/components/dashboard/rooms/room-card\";\nimport { createClient } from \"@/lib/supabase/server\";\n\nexport default async function RoomsPage() {\n  const supabase = createClient();\n  const { data: { user } } = await supabase.auth.getUser();\n\n  const { data: propiedad } = await supabase\n    .from('propiedad')\n    .select('id')\n    .eq('usuario_id', user?.id)\n    .single();\n\n  return (\n    <div className=\"space-y-4 md:space-y-6\">\n      <div className=\"bg-primary text-primary-foreground text-center py-3 rounded-sm shadow-sm\">\n        <h1 className=\"text-xl md:text-2xl font-bold tracking-wide\">Gesti\u00f3n de Habitaciones</h1>\n      </div>\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4 md:gap-6\">\n        {roomsData.map((room) => (\n          <RoomCard\n            key={room.id}\n            room={room}\n            propiedadId={propiedad?.id}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n",
    "components": [
      {
        "path": "src/components/dashboard/rooms/room-card.tsx",
        "code": "'use client';\n\nimport Image from \"next/image\";\nimport { Button } from \"@/components/ui/button\";\nimport { PlaceHolderImages } from \"@/lib/placeholder-images\";\nimport { Coins, Shell, Droplets } from \"lucide-react\";\nimport type { Room } from \"@/lib/data/rooms-data\";\nimport { Card, CardContent, CardFooter, CardHeader } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { iniciarConstruccionHabitacion } from \"@/lib/actions/construccion\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useState } from \"react\";\n\ntype RoomCardProps = {\n  room: Room;\n  propiedadId?: string;\n};\n\nconst ResourceIcon = ({ type }: { type: string }) => {\n    const iconClass = \"w-3 h-3 md:w-4 md:h-4 mr-1\";\n    switch (type) {\n        case 'Armas':\n            return <Shell className={`${iconClass} text-stone-600`} />;\n        case 'Municion':\n            return <Coins className={`${iconClass} text-yellow-600`} />;\n        case 'Dolares':\n            return <span className={`${iconClass} font-bold text-green-700 flex items-center justify-center`}>$</span>;\n        default:\n            return null;\n    }\n}\n\nexport function RoomCard({ room, propiedadId }: RoomCardProps) {\n  const image = PlaceHolderImages.find((p) => p.id === room.image) || PlaceHolderImages.find(p => p.id === 'dark-alley');\n  const { toast } = useToast();\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleUpgrade = async () => {\n    if (!propiedadId) {\n        toast({\n            title: \"Error\",\n            description: \"No se encontr\u00f3 la propiedad del usuario.\",\n            variant: \"destructive\",\n        });\n        return;\n    }\n\n    setIsLoading(true);\n    try {\n        const result = await iniciarConstruccionHabitacion(propiedadId, room.id);\n\n        if (result.error) {\n            toast({\n                title: \"Error al iniciar construcci\u00f3n\",\n                description: result.error,\n                variant: \"destructive\",\n            });\n        } else {\n            toast({\n                title: \"Construcci\u00f3n iniciada\",\n                description: `Se ha iniciado la construcci\u00f3n de ${room.name}.`,\n            });\n        }\n    } catch (error) {\n        toast({\n            title: \"Error\",\n            description: \"Ocurri\u00f3 un error inesperado.\",\n            variant: \"destructive\",\n        });\n    } finally {\n        setIsLoading(false);\n    }\n  };\n\n  return (\n    <Card className=\"flex flex-col sm:flex-row overflow-hidden hover:shadow-lg transition-shadow duration-300 border-primary/20 bg-card\">\n      {/* Image Section */}\n      <div className=\"relative w-full sm:w-1/3 min-h-[160px] sm:min-h-full\">\n        {image && (\n            <Image\n            src={image.imageUrl}\n            alt={image.description}\n            fill\n            className=\"object-cover\"\n            data-ai-hint={image.imageHint}\n            sizes=\"(max-width: 640px) 100vw, 33vw\"\n            />\n        )}\n        <div className=\"absolute top-2 right-2 sm:hidden\">\n             {room.level && <Badge variant=\"secondary\" className=\"font-bold\">Nv. {room.level}</Badge>}\n        </div>\n      </div>\n\n      {/* Content Section */}\n      <div className=\"flex-1 flex flex-col justify-between p-4 gap-3\">\n        <div className=\"space-y-2\">\n            <div className=\"flex justify-between items-start\">\n                <h3 className=\"font-bold text-lg md:text-xl text-primary font-headline leading-tight\">\n                {room.name}\n                </h3>\n                <Badge variant=\"outline\" className=\"hidden sm:inline-flex border-primary/50 text-primary font-bold\">\n                    Nv. {room.level || 1}\n                </Badge>\n            </div>\n            \n            <p className=\"text-sm text-muted-foreground line-clamp-2 md:line-clamp-3\">\n                {room.description}\n            </p>\n        </div>\n\n        {/* Resources & Action Footer */}\n        <div className=\"space-y-3 pt-2 border-t border-border/50\">\n             <div className=\"flex flex-wrap gap-x-4 gap-y-2 text-xs md:text-sm text-muted-foreground\">\n                {Object.entries(room.costs).map(([resource, value]) => (\n                    <div key={resource} className=\"flex items-center font-medium\">\n                        <ResourceIcon type={resource} />\n                        <span>{value}</span>\n                    </div>\n                ))}\n                <div className=\"flex items-center ml-auto text-xs font-mono bg-secondary/30 px-2 py-0.5 rounded\">\n                    \u23f1 {room.duration}\n                </div>\n            </div>\n\n            <div className=\"flex justify-end pt-1\">\n                {room.status === 'upgrade' && room.upgradeLevel ? (\n                <div className=\"w-full bg-secondary/20 p-2 rounded text-center\">\n                    <p className=\"text-xs text-muted-foreground\">Mejorando a</p>\n                    <p className=\"font-bold text-green-600\">Nivel {room.upgradeLevel}</p>\n                </div>\n                ) : (\n                <Button\n                    className=\"w-full sm:w-auto\"\n                    size=\"sm\"\n                    onClick={handleUpgrade}\n                    disabled={isLoading || !propiedadId}\n                >\n                    {isLoading ? \"Iniciando...\" : \"Ampliar\"}\n                </Button>\n                )}\n            </div>\n        </div>\n      </div>\n    </Card>\n  );\n}\n",
        "dependencies": [
          {
            "path": "src/hooks/use-toast.ts",
            "code": "\"use client\"\n\n// Inspired by react-hot-toast library\nimport * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n"
          },
          {
            "path": "src/lib/actions/construccion.ts",
            "code": "'use server';\n\nimport { revalidatePath } from 'next/cache';\nimport { createClient } from '@/lib/supabase/server';\nimport { IniciarConstruccionSchema } from '@/types/game';\n\nexport async function iniciarConstruccionHabitacion(\n  propiedad_id: string,\n  habitacion_id: string\n) {\n  const supabase = createClient();\n\n  // 1. Validar las entradas\n  const validatedFields = IniciarConstruccionSchema.safeParse({\n    propiedad_id,\n    habitacion_id,\n  });\n\n  if (!validatedFields.success) {\n    return {\n      error: 'Campos inv\u00e1lidos.',\n    };\n  }\n\n  const { data: parsedData } = validatedFields;\n\n  try {\n    // 2. Llamar a la funci\u00f3n RPC de la base de datos\n    const { data, error } = await supabase.rpc('iniciar_construccion_habitacion', {\n      p_propiedad_id: parsedData.propiedad_id,\n      p_habitacion_id: parsedData.habitacion_id,\n    });\n\n    if (error) {\n      console.error('Error al iniciar construcci\u00f3n:', error);\n      // El error de la base de datos puede contener informaci\u00f3n sensible,\n      // devolvemos un mensaje gen\u00e9rico o uno espec\u00edfico si es seguro.\n      return {\n        error: 'No se pudo iniciar la construcci\u00f3n. Int\u00e9ntalo de nuevo.',\n      };\n    }\n\n    // El RPC puede devolver un JSON con un campo de error espec\u00edfico\n    if (data && typeof data === 'object' && 'error' in data) {\n        return {\n            error: data.error,\n        };\n    }\n\n    // 3. Devolver una respuesta exitosa\n    revalidatePath('/dashboard/rooms');\n    return {\n      success: true,\n      data,\n    };\n  } catch (e) {\n    console.error('Excepci\u00f3n al llamar a RPC:', e);\n    return {\n      error: 'Ocurri\u00f3 un error inesperado en el servidor.',\n    };\n  }\n}\n"
          },
          {
            "path": "src/lib/data/rooms-data.ts",
            "code": "export type Room = {\n    id: string;\n    name: string;\n    level?: number;\n    description: string;\n    image: string;\n    costs: {\n        Armas?: number;\n        Municion?: number;\n        Dolares?: number;\n    };\n    duration: string;\n    status: 'upgrade' | 'expand';\n    upgradeLevel?: number;\n};\n  \n\nexport const roomsData: Room[] = [\n    {\n        id: \"oficina_del_jefe\",\n        name: \"Oficina del Jefe\",\n        level: 2,\n        description: \"El Jefe se encuentra en esta oficina, y aqu\u00ed, se toman todas las decisiones. Coordina el desarrollo y la velocidad de construcci\u00f3n de las otras \u00e1reas. Cuando m\u00e1s nivel, m\u00e1s r\u00e1pido se desarrollan el resto.\",\n        image: \"room-office\",\n        costs: { Armas: 900, Municion: 1800 },\n        duration: \"00:22:30\",\n        status: 'upgrade',\n        upgradeLevel: 3,\n    },\n    {\n        id: \"escuela_especializacion\",\n        name: \"Escuela de especializaci\u00f3n\",\n        description: \"Como ya dice el nombre, esta habitaci\u00f3n permite el entrenamiento de \\\"los chicos\\\" en nuevas t\u00e9nicas, permiti\u00e9ndoles tener m\u00e1s experiencia en combate. Al igual que para la oficina de El Jefe, cu\u00e1nto m\u00e1s r\u00e1pido se haga el entrenamiento, m\u00e1s r\u00e1pido se desarrollan las habilidades.\",\n        image: \"room-specialization\",\n        costs: { Armas: 1000, Municion: 1000, Dolares: 25 },\n        duration: \"00:05:33\",\n        status: 'expand',\n    },\n    {\n        id: \"armeria\",\n        name: \"Armer\u00eda\",\n        description: \"Aqu\u00ed, en la Armer\u00eda, como dice el nombre, se guardan armas. Ser\u00e1n de gran necesidad para ocupar nuevos lugares, y para entrenamientos en combate. Cuanto mejor desarrollada est\u00e9, m\u00e1s armas podr\u00e1s hacer al mismo tiempo.\",\n        image: \"room-armory\",\n        costs: { Armas: 12, Municion: 60 },\n        duration: \"00:01:23\",\n        status: 'expand',\n    },\n    {\n        id: \"almacen_de_municion\",\n        name: \"Almac\u00e9n de munici\u00f3n\",\n        level: 1,\n        description: \"El almac\u00e9n de munici\u00f3n es similar a la armer\u00eda. Aqu\u00ed, se manufactura la munici\u00f3n importante. Es necesaria, en grandes cantidades, al ocupar \u00e1reas, as\u00ed como para su uso en entrenamientos. A diferencia de las armas, la munici\u00f3n se usa mucho m\u00e1s r\u00e1pido.\",\n        image: \"room-ammo\",\n        costs: { Armas: 36, Municion: 60 },\n        duration: \"00:06:40\",\n        status: 'upgrade',\n        upgradeLevel: 2,\n    },\n    {\n        id: \"cerveceria\",\n        name: \"Cervecer\u00eda\",\n        description: \"Esta habitaci\u00f3n manufactura alcohol. Desgraciadamente (\u00bfo afortunadamente?) est\u00e1 prohibido y por tanto, muy demandado por la poblaci\u00f3n, as\u00ed que es un negocio pr\u00f3spero. Sin embargo, necesitar\u00e1s ciertas estrategias para poder llevarlo hasta los ciudadanos.\",\n        image: \"room-brewery\",\n        costs: { Armas: 20, Municion: 20 },\n        duration: \"00:02:47\",\n        status: 'expand',\n    },\n    {\n        id: \"campo_de_entrenamiento\",\n        name: \"Campo de entrenamiento\",\n        description: \"Tal y como dice el nombre, en el campo de entrenamiento, tus \\\"chicos\\\" entrenar\u00e1n. El mismo, depender\u00e1 seg\u00fan el tipo de unidades que puedas producir, por ejemplo, simples delincuentes, asesinos, profesionales, a los que tus enemigos tendr\u00e1n un respeto extremo. Dependiendo del nivel, las unidades ser\u00e1n creadas en menor tiempo.\",\n        image: \"room-training\",\n        costs: { Armas: 1000, Municion: 2500 },\n        duration: \"00:15:33\",\n        status: 'expand',\n    },\n];\n"
          },
          {
            "path": "src/lib/placeholder-images.ts",
            "code": "import data from './placeholder-images.json';\n\nexport type ImagePlaceholder = {\n  id: string;\n  description: string;\n  imageUrl: string;\n  imageHint: string;\n};\n\nexport const PlaceHolderImages: ImagePlaceholder[] = data.placeholderImages;\n"
          }
        ]
      }
    ]
  },
  "src/app/(auth)/forgot-password/page.tsx": {
    "route": "/forgot-password",
    "code": "import { ForgotPasswordForm } from '@/components/auth/forgot-password/forgot-password-form'\nimport Link from 'next/link'\n\nexport default function ForgotPasswordPage() {\n  return (\n    <>\n      <ForgotPasswordForm />\n      <div className=\"mt-4 text-center text-sm\">\n        \u00bfRecordaste tu contrase\u00f1a?{' '}\n        <Link href=\"/login\" className=\"underline text-accent hover:text-accent/90\">\n          Inicia Sesi\u00f3n\n        </Link>\n      </div>\n    </>\n  )\n}\n",
    "components": [
      {
        "path": "src/components/auth/forgot-password/forgot-password-form.tsx",
        "code": "'use client'\n\nimport { useActionState } from 'react'\nimport { useFormStatus } from 'react-dom'\nimport { forgotPassword } from '@/actions/auth.stubs'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { useEffect, useState } from 'react'\nimport { useToast } from '@/hooks/use-toast'\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert'\nimport { Terminal } from 'lucide-react'\n\nconst initialState = {\n  message: '',\n  errors: {} as Record<string, string[]>,\n}\n\nfunction SubmitButton() {\n  const { pending } = useFormStatus()\n  return (\n    <Button type=\"submit\" className=\"w-full\" disabled={pending}>\n      {pending ? 'Enviando...' : 'Enviar enlace de restablecimiento'}\n    </Button>\n  )\n}\n\nexport function ForgotPasswordForm() {\n  const [state, formAction] = useActionState(forgotPassword, initialState)\n  const { toast } = useToast()\n  const [showSuccess, setShowSuccess] = useState(false)\n\n  useEffect(() => {\n    if (state?.message && !state.errors) {\n      setShowSuccess(true)\n    } else if (state?.message) {\n      toast({\n        title: 'Error',\n        description: state.message,\n        variant: 'destructive',\n      })\n    }\n  }, [state, toast])\n\n  if(showSuccess) {\n    return (\n        <Alert>\n          <Terminal className=\"h-4 w-4\" />\n          <AlertTitle>\u00a1Revisa tu correo!</AlertTitle>\n          <AlertDescription>\n            {state.message}\n          </AlertDescription>\n        </Alert>\n    )\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"text-2xl\">\u00bfOlvidaste tu contrase\u00f1a?</CardTitle>\n        <CardDescription>\n          Ingresa tu correo electr\u00f3nico y te enviaremos un enlace para restablecerla.\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <form action={formAction} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"email\">Correo Electr\u00f3nico</Label>\n            <Input\n              id=\"email\"\n              name=\"email\"\n              type=\"email\"\n              placeholder=\"nombre@ejemplo.com\"\n              required\n            />\n            {state?.errors?.email && (\n              <p className=\"text-sm text-destructive\">{state.errors.email[0]}</p>\n            )}\n          </div>\n          <SubmitButton />\n        </form>\n      </CardContent>\n    </Card>\n  )\n}\n",
        "dependencies": [
          {
            "path": "src/actions/auth.stubs.ts",
            "code": "'use server'\n\nexport async function forgotPassword(prevState: any, formData: FormData) {\n  // Return undefined for errors to match the expected type somewhat, or empty object\n  // But Typescript seems to think state.errors is 'never' or something?\n  // Let's explicitly return the shape.\n  return { \n      message: 'Not implemented', \n      errors: {} as Record<string, string[]> // Cast to satisfy potential users\n  }\n}\n\nexport async function socialLogin(provider: string) {\n    console.log('Social login with', provider);\n}\n\nexport async function resetPassword(prevState: any, formData: FormData) {\n  return { \n      message: 'Not implemented', \n      errors: {} as Record<string, string[]>\n  }\n}\n"
          },
          {
            "path": "src/hooks/use-toast.ts",
            "code": "\"use client\"\n\n// Inspired by react-hot-toast library\nimport * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n"
          }
        ]
      }
    ]
  },
  "src/app/(auth)/login/page.tsx": {
    "route": "/login",
    "code": "import { LoginForm } from '@/components/auth/login/login-form'\nimport Link from 'next/link'\n\nexport default function LoginPage() {\n  return (\n    <>\n      <LoginForm />\n      <div className=\"mt-4 text-center text-sm\">\n        \u00bfNo tienes una cuenta?{' '}\n        <Link href=\"/signup\" className=\"underline text-accent hover:text-accent/90\">\n          Reg\u00edstrate\n        </Link>\n      </div>\n    </>\n  )\n}\n",
    "components": [
      {
        "path": "src/components/auth/login/login-form.tsx",
        "code": "'use client'\n\nimport { useActionState } from 'react'\nimport { useFormStatus } from 'react-dom'\nimport { loginAction as login } from '@/actions/auth.actions'\nimport { SocialButtons } from '@/components/auth/social-buttons'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport Link from 'next/link'\nimport { useEffect } from 'react'\nimport { useToast } from '@/hooks/use-toast'\nimport { Button } from 'react-day-picker'\n\nconst initialState = {\n  message: '',\n  errors: undefined,\n}\n\nfunction SubmitButton() {\n  const { pending } = useFormStatus()\n  return (\n    <Button type=\"submit\" className=\"w-full\" disabled={pending}>\n      {pending ? 'Iniciando Sesi\u00f3n...' : 'Iniciar Sesi\u00f3n'}\n    </Button>\n  )\n}\n\nexport function LoginForm() {\n  const [state, formAction] = useActionState(login, initialState)\n  const { toast } = useToast()\n\n  useEffect(() => {\n    if (state?.message) {\n      toast({\n        title: 'Error de inicio de sesi\u00f3n',\n        description: state.message,\n        variant: 'destructive',\n      })\n    }\n  }, [state, toast])\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"text-2xl\">Iniciar Sesi\u00f3n</CardTitle>\n        <CardDescription>\n          Ingresa tu correo electr\u00f3nico para acceder a tu cuenta.\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <form action={formAction} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"email\">Correo Electr\u00f3nico</Label>\n            <Input\n              id=\"email\"\n              name=\"email\"\n              type=\"email\"\n              placeholder=\"nombre@ejemplo.com\"\n              required\n              defaultValue=\"profematiasprestes@gmail.com\"\n            />\n            {state?.errors?.email && (\n              <p className=\"text-sm text-destructive\">{state.errors.email[0]}</p>\n            )}\n          </div>\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center\">\n              <Label htmlFor=\"password\">Contrase\u00f1a</Label>\n              <Link\n                href=\"/forgot-password\"\n                className=\"ml-auto inline-block text-sm underline text-accent hover:text-accent/90\"\n              >\n                \u00bfOlvidaste tu contrase\u00f1a?\n              </Link>\n            </div>\n            <Input id=\"password\" name=\"password\" type=\"password\" required defaultValue=\"password123\" />\n            {state?.errors?.password && (\n              <p className=\"text-sm text-destructive\">{state.errors.password[0]}</p>\n            )}\n          </div>\n          <SubmitButton />\n        </form>\n        <div className=\"relative my-6\">\n          <div className=\"absolute inset-0 flex items-center\">\n            <span className=\"w-full border-t\" />\n          </div>\n          <div className=\"relative flex justify-center text-xs uppercase\">\n            <span className=\"bg-card px-2 text-muted-foreground\">O contin\u00faa con</span>\n          </div>\n        </div>\n        <SocialButtons />\n      </CardContent>\n    </Card>\n  )\n}\n",
        "dependencies": [
          {
            "path": "src/actions/auth.actions.ts",
            "code": "'use server'\n\nimport { z } from 'zod'\nimport { signUp, signIn, signOut } from '@/lib/services/auth.service'\nimport { redirect } from 'next/navigation'\n\nconst registerSchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(6),\n  fullName: z.string().min(3),\n})\n\nconst loginSchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(6),\n})\n\nexport async function registerAction(prevState: any, formData: FormData) {\n  const data = Object.fromEntries(formData.entries())\n  \n  const parsed = registerSchema.safeParse({\n    email: data.email,\n    password: data.password,\n    fullName: data.fullName,\n  })\n\n  if (!parsed.success) {\n    return {\n      message: 'Error de validaci\u00f3n',\n      errors: parsed.error.flatten().fieldErrors\n    }\n  }\n\n  const result = await signUp({\n    email: parsed.data.email,\n    password: parsed.data.password,\n    full_name: parsed.data.fullName,\n  })\n\n  if (!result.success) {\n    return {\n      message: result.error || 'Error desconocido',\n      errors: undefined\n    }\n  }\n\n  // Si hay sesi\u00f3n (autologin), redirigir al dashboard\n  if (result.data?.session) {\n    redirect('/dashboard')\n  }\n\n  return { message: 'Cuenta creada exitosamente. Por favor inicia sesi\u00f3n.' }\n}\n\nexport async function loginAction(prevState: any, formData: FormData) {\n  const data = Object.fromEntries(formData.entries())\n\n  const parsed = loginSchema.safeParse({\n    email: data.email,\n    password: data.password,\n  })\n\n  if (!parsed.success) {\n    return {\n      message: 'Error de validaci\u00f3n',\n      errors: parsed.error.flatten().fieldErrors\n    }\n  }\n\n  const result = await signIn({\n    email: parsed.data.email,\n    password: parsed.data.password,\n  })\n\n  if (!result.success) {\n    return {\n      message: result.error || 'Credenciales inv\u00e1lidas',\n      errors: undefined\n    }\n  }\n\n  redirect('/dashboard')\n}\n\nexport async function signOutAction() {\n  await signOut()\n}\n"
          },
          {
            "path": "src/components/auth/social-buttons.tsx",
            "code": "'use client'\nimport { Button } from '@/components/ui/button'\nimport { socialLogin } from '@/actions/auth.stubs'\nimport { Github } from 'lucide-react'\n\nconst GoogleIcon = () => (\n    <svg role=\"img\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" className=\"size-4 mr-2\">\n      <path\n        fill=\"#4285F4\"\n        d=\"M22.56,12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26,1.37-1.04,2.53-2.21,3.31v2.77h3.57c2.08-1.92,3.28-4.74,3.28-8.09Z\"\n      />\n      <path\n        fill=\"#34A853\"\n        d=\"M12,23c2.97,0,5.46-.98,7.28-2.66l-3.57-2.77c-.98,.66-2.23,1.06-3.71,1.06-2.86,0-5.29-1.93-6.16-4.53H2.18v2.84C3.99,20.53,7.7,23,12,23Z\"\n      />\n      <path\n        fill=\"#FBBC05\"\n        d=\"M5.84,14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43,.35-2.09V7.07H2.18C1.43,8.55,1,10.22,1,12s.43,3.45,1.18,4.93l3.66-2.84Z\"\n      />\n      <path\n        fill=\"#EA4335\"\n        d=\"M12,5.38c1.62,0,3.06,.56,4.21,1.64l3.15-3.15C17.45,2.09,14.97,1,12,1,7.7,1,3.99,3.47,2.18,7.07l3.66,2.84c.87-2.6,3.3-4.53,6.16-4.53Z\"\n      />\n    </svg>\n  );\n\nexport function SocialButtons() {\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        <form action={() => socialLogin('google')}>\n          <Button variant=\"outline\" type=\"submit\" className=\"w-full\">\n              <GoogleIcon /> Google\n          </Button>\n        </form>\n        <form action={() => socialLogin('github')}>\n          <Button variant=\"outline\" type=\"submit\" className=\"w-full\">\n              <Github className=\"mr-2 h-4 w-4\" /> Github\n          </Button>\n        </form>\n    </div>\n  )\n}\n"
          },
          {
            "path": "src/hooks/use-toast.ts",
            "code": "\"use client\"\n\n// Inspired by react-hot-toast library\nimport * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n"
          }
        ]
      }
    ]
  },
  "src/app/(auth)/signup/page.tsx": {
    "route": "/signup",
    "code": "import { SignupForm } from '@/components/auth/signup/signup-form'\nimport Link from 'next/link'\n\nexport default function SignupPage() {\n  return (\n    <>\n      <SignupForm />\n      <div className=\"mt-4 text-center text-sm\">\n        \u00bfYa tienes una cuenta?{' '}\n        <Link href=\"/login\" className=\"underline text-accent hover:text-accent/90\">\n          Inicia Sesi\u00f3n\n        </Link>\n      </div>\n    </>\n  )\n}\n",
    "components": [
      {
        "path": "src/components/auth/signup/signup-form.tsx",
        "code": "'use client'\n\nimport { useActionState } from 'react'\nimport { useFormStatus } from 'react-dom'\nimport { registerAction as signup } from '@/actions/auth.actions'\nimport { SocialButtons } from '@/components/auth/social-buttons'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { useEffect, useState } from 'react'\nimport { useToast } from '@/hooks/use-toast'\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert'\nimport { Terminal } from 'lucide-react'\nimport { Button } from 'react-day-picker'\n\nconst initialState = {\n  message: '',\n  errors: undefined,\n}\n\nfunction SubmitButton() {\n  const { pending } = useFormStatus()\n  return (\n    <Button type=\"submit\" className=\"w-full\" disabled={pending}>\n      {pending ? 'Creando cuenta...' : 'Crear una cuenta'}\n    </Button>\n  )\n}\n\nexport function SignupForm() {\n  const [state, formAction] = useActionState(signup, initialState)\n  const { toast } = useToast()\n  const [showSuccess, setShowSuccess] = useState(false)\n\n  useEffect(() => {\n    if (state?.message && !state.errors) {\n      setShowSuccess(true)\n    } else if (state?.message) {\n      toast({\n        title: 'Error de registro',\n        description: state.message,\n        variant: 'destructive',\n      })\n    }\n  }, [state, toast])\n\n  if (showSuccess) {\n    return (\n        <Alert>\n          <Terminal className=\"h-4 w-4\" />\n          <AlertTitle>\u00a1Hecho!</AlertTitle>\n          <AlertDescription>\n            {state.message}\n          </AlertDescription>\n        </Alert>\n    )\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"text-2xl\">Registrarse</CardTitle>\n        <CardDescription>\n          Ingresa tu informaci\u00f3n para crear una cuenta.\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <form action={formAction} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"fullName\">Nombre Completo</Label>\n            <Input\n              id=\"fullName\"\n              name=\"fullName\"\n              type=\"text\"\n              placeholder=\"Tu nombre\"\n              required\n            />\n            {state?.errors?.fullName && (\n              <p className=\"text-sm text-destructive\">{state.errors.fullName[0]}</p>\n            )}\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"email\">Correo Electr\u00f3nico</Label>\n            <Input\n              id=\"email\"\n              name=\"email\"\n              type=\"email\"\n              placeholder=\"nombre@ejemplo.com\"\n              required\n            />\n             {state?.errors?.email && (\n              <p className=\"text-sm text-destructive\">{state.errors.email[0]}</p>\n            )}\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"password\">Contrase\u00f1a</Label>\n            <Input id=\"password\" name=\"password\" type=\"password\" required />\n            {state?.errors?.password && (\n              <p className=\"text-sm text-destructive\">{state.errors.password[0]}</p>\n            )}\n          </div>\n          <SubmitButton />\n        </form>\n        <div className=\"relative my-6\">\n          <div className=\"absolute inset-0 flex items-center\">\n            <span className=\"w-full border-t\" />\n          </div>\n          <div className=\"relative flex justify-center text-xs uppercase\">\n            <span className=\"bg-card px-2 text-muted-foreground\">O contin\u00faa con</span>\n          </div>\n        </div>\n        <SocialButtons />\n      </CardContent>\n    </Card>\n  )\n}\n",
        "dependencies": [
          {
            "path": "src/actions/auth.actions.ts",
            "code": "'use server'\n\nimport { z } from 'zod'\nimport { signUp, signIn, signOut } from '@/lib/services/auth.service'\nimport { redirect } from 'next/navigation'\n\nconst registerSchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(6),\n  fullName: z.string().min(3),\n})\n\nconst loginSchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(6),\n})\n\nexport async function registerAction(prevState: any, formData: FormData) {\n  const data = Object.fromEntries(formData.entries())\n  \n  const parsed = registerSchema.safeParse({\n    email: data.email,\n    password: data.password,\n    fullName: data.fullName,\n  })\n\n  if (!parsed.success) {\n    return {\n      message: 'Error de validaci\u00f3n',\n      errors: parsed.error.flatten().fieldErrors\n    }\n  }\n\n  const result = await signUp({\n    email: parsed.data.email,\n    password: parsed.data.password,\n    full_name: parsed.data.fullName,\n  })\n\n  if (!result.success) {\n    return {\n      message: result.error || 'Error desconocido',\n      errors: undefined\n    }\n  }\n\n  // Si hay sesi\u00f3n (autologin), redirigir al dashboard\n  if (result.data?.session) {\n    redirect('/dashboard')\n  }\n\n  return { message: 'Cuenta creada exitosamente. Por favor inicia sesi\u00f3n.' }\n}\n\nexport async function loginAction(prevState: any, formData: FormData) {\n  const data = Object.fromEntries(formData.entries())\n\n  const parsed = loginSchema.safeParse({\n    email: data.email,\n    password: data.password,\n  })\n\n  if (!parsed.success) {\n    return {\n      message: 'Error de validaci\u00f3n',\n      errors: parsed.error.flatten().fieldErrors\n    }\n  }\n\n  const result = await signIn({\n    email: parsed.data.email,\n    password: parsed.data.password,\n  })\n\n  if (!result.success) {\n    return {\n      message: result.error || 'Credenciales inv\u00e1lidas',\n      errors: undefined\n    }\n  }\n\n  redirect('/dashboard')\n}\n\nexport async function signOutAction() {\n  await signOut()\n}\n"
          },
          {
            "path": "src/components/auth/social-buttons.tsx",
            "code": "'use client'\nimport { Button } from '@/components/ui/button'\nimport { socialLogin } from '@/actions/auth.stubs'\nimport { Github } from 'lucide-react'\n\nconst GoogleIcon = () => (\n    <svg role=\"img\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" className=\"size-4 mr-2\">\n      <path\n        fill=\"#4285F4\"\n        d=\"M22.56,12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26,1.37-1.04,2.53-2.21,3.31v2.77h3.57c2.08-1.92,3.28-4.74,3.28-8.09Z\"\n      />\n      <path\n        fill=\"#34A853\"\n        d=\"M12,23c2.97,0,5.46-.98,7.28-2.66l-3.57-2.77c-.98,.66-2.23,1.06-3.71,1.06-2.86,0-5.29-1.93-6.16-4.53H2.18v2.84C3.99,20.53,7.7,23,12,23Z\"\n      />\n      <path\n        fill=\"#FBBC05\"\n        d=\"M5.84,14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43,.35-2.09V7.07H2.18C1.43,8.55,1,10.22,1,12s.43,3.45,1.18,4.93l3.66-2.84Z\"\n      />\n      <path\n        fill=\"#EA4335\"\n        d=\"M12,5.38c1.62,0,3.06,.56,4.21,1.64l3.15-3.15C17.45,2.09,14.97,1,12,1,7.7,1,3.99,3.47,2.18,7.07l3.66,2.84c.87-2.6,3.3-4.53,6.16-4.53Z\"\n      />\n    </svg>\n  );\n\nexport function SocialButtons() {\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        <form action={() => socialLogin('google')}>\n          <Button variant=\"outline\" type=\"submit\" className=\"w-full\">\n              <GoogleIcon /> Google\n          </Button>\n        </form>\n        <form action={() => socialLogin('github')}>\n          <Button variant=\"outline\" type=\"submit\" className=\"w-full\">\n              <Github className=\"mr-2 h-4 w-4\" /> Github\n          </Button>\n        </form>\n    </div>\n  )\n}\n"
          },
          {
            "path": "src/hooks/use-toast.ts",
            "code": "\"use client\"\n\n// Inspired by react-hot-toast library\nimport * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n"
          }
        ]
      }
    ]
  },
  "src/app/reset-password/page.tsx": {
    "route": "/reset-password",
    "code": "import { ResetPasswordForm } from '@/components/reset-password/reset-password-form'\n\nexport default function ResetPasswordPage() {\n  return (\n    <div className=\"flex min-h-screen w-full items-center justify-center bg-background p-4\">\n      <div className=\"w-full max-w-md\">\n        <ResetPasswordForm />\n      </div>\n    </div>\n  )\n}\n",
    "components": [
      {
        "path": "src/components/reset-password/reset-password-form.tsx",
        "code": "'use client'\n\nimport { useActionState } from 'react'\nimport { useFormStatus } from 'react-dom'\nimport { resetPassword } from '@/lib/actions/auth'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { useEffect } from 'react'\nimport { useToast } from '@/hooks/use-toast'\n\nconst initialState = {\n  message: '',\n  errors: undefined,\n}\n\nfunction SubmitButton() {\n  const { pending } = useFormStatus()\n  return (\n    <Button type=\"submit\" className=\"w-full\" disabled={pending}>\n      {pending ? 'Restableciendo...' : 'Restablecer Contrase\u00f1a'}\n    </Button>\n  )\n}\n\nexport function ResetPasswordForm() {\n  const [state, formAction] = useActionState(resetPassword, initialState)\n  const { toast } = useToast()\n\n  useEffect(() => {\n    if (state?.message) {\n      toast({\n        title: 'Error',\n        description: state.message,\n        variant: 'destructive',\n      })\n    }\n  }, [state, toast])\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"text-2xl\">Restablecer Contrase\u00f1a</CardTitle>\n        <CardDescription>\n          Ingresa tu nueva contrase\u00f1a a continuaci\u00f3n.\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <form action={formAction} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"password\">Nueva Contrase\u00f1a</Label>\n            <Input id=\"password\" name=\"password\" type=\"password\" required />\n            {state?.errors?.password && (\n              <p className=\"text-sm text-destructive\">{state.errors.password[0]}</p>\n            )}\n          </div>\n          <SubmitButton />\n        </form>\n      </CardContent>\n    </Card>\n  )\n}\n",
        "dependencies": [
          {
            "path": "src/hooks/use-toast.ts",
            "code": "\"use client\"\n\n// Inspired by react-hot-toast library\nimport * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n"
          },
          {
            "path": "src/lib/actions/auth.ts",
            "code": "'use server'\n\nimport { createClient } from '@/lib/supabase/server'\nimport { headers } from 'next/headers'\nimport { redirect } from 'next/navigation'\nimport { z } from 'zod'\n\nconst loginSchema = z.object({\n  email: z.string().email({ message: 'Correo electr\u00f3nico inv\u00e1lido' }),\n  password: z.string().min(6, { message: 'La contrase\u00f1a debe tener al menos 6 caracteres' }),\n})\n\nexport async function login(prevState: any, formData: FormData) {\n  const supabase = createClient()\n  const validatedFields = loginSchema.safeParse(Object.fromEntries(formData.entries()))\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n      message: 'Por favor, corrige los errores en el formulario.',\n    }\n  }\n  \n  const { email, password } = validatedFields.data\n\n  const { error } = await supabase.auth.signInWithPassword({\n    email,\n    password,\n  })\n\n  if (error) {\n    return {\n        message: 'Credenciales inv\u00e1lidas. Por favor, int\u00e9ntalo de nuevo.',\n    }\n  }\n\n  return redirect('/dashboard')\n}\n\nconst signupSchema = z.object({\n  email: z.string().email({ message: 'Correo electr\u00f3nico inv\u00e1lido' }),\n  password: z.string().min(6, { message: 'La contrase\u00f1a debe tener al menos 6 caracteres' }),\n})\n\nexport async function signup(prevState: any, formData: FormData) {\n  const origin = (await headers()).get('origin')\n  const supabase = createClient()\n  const validatedFields = signupSchema.safeParse(Object.fromEntries(formData.entries()))\n  \n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n      message: 'Por favor, corrige los errores en el formulario.',\n    }\n  }\n  \n  const { email, password } = validatedFields.data\n\n  const { error } = await supabase.auth.signUp({\n    email,\n    password,\n    options: {\n      emailRedirectTo: `${origin}/auth/callback`,\n    },\n  })\n\n  if (error) {\n    if (error.message.includes('User already registered')) {\n        return { message: 'Este correo electr\u00f3nico ya est\u00e1 registrado.'}\n    }\n    return { message: 'No se pudo crear la cuenta. Por favor, int\u00e9ntalo de nuevo.' }\n  }\n\n  return { message: '\u00a1Revisa tu correo electr\u00f3nico para verificar tu cuenta!' }\n}\n\nconst forgotPasswordSchema = z.object({\n    email: z.string().email({ message: 'Correo electr\u00f3nico inv\u00e1lido' }),\n})\n\nexport async function forgotPassword(prevState: any, formData: FormData) {\n    const origin = (await headers()).get('origin')\n    const supabase = createClient()\n    const validatedFields = forgotPasswordSchema.safeParse(Object.fromEntries(formData.entries()))\n\n    if (!validatedFields.success) {\n        return {\n            errors: validatedFields.error.flatten().fieldErrors,\n            message: 'Por favor, corrige los errores en el formulario.',\n        }\n    }\n\n    const { email } = validatedFields.data\n\n    const { error } = await supabase.auth.resetPasswordForEmail(email, {\n        redirectTo: `${origin}/reset-password`,\n    })\n\n    if (error) {\n        return { message: 'No se pudo enviar el correo de restablecimiento. Por favor, int\u00e9ntalo de nuevo.' }\n    }\n\n    return { message: 'Si existe una cuenta con este correo, recibir\u00e1s un enlace para restablecer tu contrase\u00f1a.' }\n}\n\nconst resetPasswordSchema = z.object({\n    password: z.string().min(6, { message: 'La contrase\u00f1a debe tener al menos 6 caracteres' }),\n});\n\nexport async function resetPassword(prevState: any, formData: FormData) {\n    const supabase = createClient()\n    \n    const { data: { user } } = await supabase.auth.getUser();\n    if (!user) {\n        return { message: 'No est\u00e1s autenticado o la sesi\u00f3n ha expirado.' };\n    }\n\n    const validatedFields = resetPasswordSchema.safeParse(Object.fromEntries(formData.entries()));\n\n    if (!validatedFields.success) {\n        return {\n            errors: validatedFields.error.flatten().fieldErrors,\n            message: 'Por favor, corrige los errores en el formulario.',\n        }\n    }\n    const { password } = validatedFields.data;\n    \n    const { error } = await supabase.auth.updateUser({ password });\n\n    if (error) {\n        return { message: 'No se pudo restablecer la contrase\u00f1a. El enlace puede haber expirado.' };\n    }\n\n    redirect('/dashboard');\n}\n\nexport async function socialLogin(provider: 'google' | 'github') {\n  const origin = (await headers()).get('origin')\n  const supabase = createClient()\n  const { data, error } = await supabase.auth.signInWithOAuth({\n    provider,\n    options: {\n      redirectTo: `${origin}/auth/callback`,\n    },\n  })\n\n  if (error) {\n    // This will be caught by the nearest error boundary\n    return redirect(`/login?message=No se pudo iniciar sesi\u00f3n con ${provider}.`)\n  }\n  \n  return redirect(data.url)\n}\n\nexport async function signOut() {\n  const supabase = createClient()\n  await supabase.auth.signOut()\n  redirect('/login')\n}\n"
          }
        ]
      }
    ]
  }
}